========== Linting Errors ==========
0
========== End of Linting ==========
============================================
Test Run Started: 2025-07-02 14:07:28
--------------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.10.18, pytest-8.3.5, pluggy-1.6.0 -- /opt/hostedtoolcache/Python/3.10.18/x64/bin/python
cachedir: .pytest_cache
metadata: {'Python': '3.10.18', 'Platform': 'Linux-6.11.0-1015-azure-x86_64-with-glibc2.39', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'metadata': '3.1.1', 'rerunfailures': '15.1', 'html': '4.1.1', 'Faker': '37.4.0', 'xdist': '3.8.0'}, 'CI': 'true', 'JAVA_HOME': '/usr/lib/jvm/temurin-17-jdk-amd64'}
rootdir: /home/runner/work/Mocha_accounting/Mocha_accounting
plugins: metadata-3.1.1, rerunfailures-15.1, html-4.1.1, Faker-37.4.0, xdist-3.8.0
collecting ... collected 0 items / 1 error

==================================== ERRORS ====================================
_____________________ ERROR collecting tests/test_login.py _____________________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_login.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_login.py:13: in <module>
    from pages.login_page import LoginPage
pages/login_page.py:4: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
- Generated html report: file:///home/runner/work/Mocha_accounting/Mocha_accounting/C%3A%5CUsers%5CTaurus13%5CPycharmProjects%5CPythonProject%5Creports/20250702_140729/report.html -
=========================== short test summary info ============================
ERROR tests/test_login.py
!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!
=============================== 1 error in 0.15s ===============================
--------------------------------------------
Test Run Finished: 2025-07-02 14:07:30
Duration: 2 seconds
Status: FAILURE
Exit Code: 2
============================================
========== Linting Errors ==========
0
========== End of Linting ==========
============================================
Test Run Started: 2025-07-02 14:40:01
--------------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.10.18, pytest-8.3.5, pluggy-1.6.0 -- /opt/hostedtoolcache/Python/3.10.18/x64/bin/python
cachedir: .pytest_cache
metadata: {'Python': '3.10.18', 'Platform': 'Linux-6.11.0-1015-azure-x86_64-with-glibc2.39', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'metadata': '3.1.1', 'rerunfailures': '15.1', 'html': '4.1.1', 'Faker': '37.4.0', 'xdist': '3.8.0'}, 'CI': 'true', 'JAVA_HOME': '/usr/lib/jvm/temurin-17-jdk-amd64'}
rootdir: /home/runner/work/Mocha_accounting/Mocha_accounting
plugins: metadata-3.1.1, rerunfailures-15.1, html-4.1.1, Faker-37.4.0, xdist-3.8.0
collecting ... collected 0 items / 20 errors

==================================== ERRORS ====================================
___________________ ERROR collecting tests/test_all_sales.py ___________________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_all_sales.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_all_sales.py:7: in <module>
    from pages.all_sales_page import AllSales
pages/all_sales_page.py:10: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
______________ ERROR collecting tests/test_create_credit_memo.py _______________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_create_credit_memo.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_create_credit_memo.py:5: in <module>
    from pages.create_credit_memo import CreditMemo
pages/create_credit_memo.py:14: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
________________ ERROR collecting tests/test_create_invoice.py _________________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_create_invoice.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_create_invoice.py:4: in <module>
    from pages.create_invoice import Create_Invoice
pages/create_invoice.py:7: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
____________ ERROR collecting tests/test_create_product_service.py _____________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_create_product_service.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_create_product_service.py:4: in <module>
    from self import driver
E   ModuleNotFoundError: No module named 'self'
_____________ ERROR collecting tests/test_create_refund_receipt.py _____________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_create_refund_receipt.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_create_refund_receipt.py:5: in <module>
    from pages.create_refund_receipt import RefundReceipt
pages/create_refund_receipt.py:14: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
_____________ ERROR collecting tests/test_create_sales_receipt.py ______________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_create_sales_receipt.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_create_sales_receipt.py:5: in <module>
    from pages.create_sales_receipt import SalesReceipt
pages/create_sales_receipt.py:14: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
________________ ERROR collecting tests/test_createcustomer.py _________________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_createcustomer.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_createcustomer.py:3: in <module>
    from pages.create_customer import CreateCustomer
pages/create_customer.py:17: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
_________________ ERROR collecting tests/test_customer_list.py _________________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_customer_list.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_customer_list.py:7: in <module>
    from pages.customer_list import CustomerList
pages/customer_list.py:11: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
___________ ERROR collecting tests/test_customer_transaction_list.py ___________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_customer_transaction_list.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_customer_transaction_list.py:7: in <module>
    from pages.customer_list import CustomerList
pages/customer_list.py:11: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
___________ ERROR collecting tests/test_expense/test_bill_payment.py ___________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_expense/test_bill_payment.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_expense/test_bill_payment.py:5: in <module>
    from pages.expenses.bill_payment import BillPayment
pages/expenses/bill_payment.py:15: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
___________ ERROR collecting tests/test_expense/test_create_bill.py ____________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_expense/test_create_bill.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_expense/test_create_bill.py:7: in <module>
    from pages.expenses.create_bill import Create_Bill
pages/expenses/create_bill.py:11: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
___________ ERROR collecting tests/test_expense/test_create_check.py ___________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_expense/test_create_check.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_expense/test_create_check.py:4: in <module>
    from pages.expenses.create_check import Create_Check
pages/expenses/create_check.py:11: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
__________ ERROR collecting tests/test_expense/test_create_expense.py __________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_expense/test_create_expense.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_expense/test_create_expense.py:7: in <module>
    from pages.expenses.create_expense import Create_Expense
pages/expenses/create_expense.py:11: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
______ ERROR collecting tests/test_expense/test_create_purchase_order.py _______
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_expense/test_create_purchase_order.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_expense/test_create_purchase_order.py:5: in <module>
    from pages.expenses.create_purchase_order import Create_Purchase_Order
pages/expenses/create_purchase_order.py:11: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
__________ ERROR collecting tests/test_expense/test_create_vendor.py ___________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_expense/test_create_vendor.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_expense/test_create_vendor.py:7: in <module>
    from pages.expenses.create_vendor import Create_Vendor
pages/expenses/create_vendor.py:9: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
_______ ERROR collecting tests/test_expense/test_create_vendor_credit.py _______
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_expense/test_create_vendor_credit.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_expense/test_create_vendor_credit.py:5: in <module>
    from pages.expenses.create_vendor_credit import Create_Vendor_Credit
pages/expenses/create_vendor_credit.py:11: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
___________ ERROR collecting tests/test_expense/test_expense_list.py ___________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_expense/test_expense_list.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_expense/test_expense_list.py:7: in <module>
    from pages.expenses.expense_list import  ExpenseList
pages/expenses/expense_list.py:16: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
__________________ ERROR collecting tests/test_invoce_list.py __________________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_invoce_list.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_invoce_list.py:7: in <module>
    from pages.invoices_list import InvoicesList
pages/invoices_list.py:11: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
_____________________ ERROR collecting tests/test_login.py _____________________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_login.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_login.py:13: in <module>
    from pages.login_page import LoginPage
pages/login_page.py:4: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
________________ ERROR collecting tests/test_receive_payment.py ________________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_receive_payment.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_receive_payment.py:5: in <module>
    from pages.receive_payment import ReceivePayment
pages/receive_payment.py:15: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
- Generated html report: file:///home/runner/work/Mocha_accounting/Mocha_accounting/C%3A%5CUsers%5CTaurus13%5CPycharmProjects%5CPythonProject%5Creports/20250702_144004/report.html -
=========================== short test summary info ============================
ERROR tests/test_all_sales.py
ERROR tests/test_create_credit_memo.py
ERROR tests/test_create_invoice.py
ERROR tests/test_create_product_service.py
ERROR tests/test_create_refund_receipt.py
ERROR tests/test_create_sales_receipt.py
ERROR tests/test_createcustomer.py
ERROR tests/test_customer_list.py
ERROR tests/test_customer_transaction_list.py
ERROR tests/test_expense/test_bill_payment.py
ERROR tests/test_expense/test_create_bill.py
ERROR tests/test_expense/test_create_check.py
ERROR tests/test_expense/test_create_expense.py
ERROR tests/test_expense/test_create_purchase_order.py
ERROR tests/test_expense/test_create_vendor.py
ERROR tests/test_expense/test_create_vendor_credit.py
ERROR tests/test_expense/test_expense_list.py
ERROR tests/test_invoce_list.py
ERROR tests/test_login.py
ERROR tests/test_receive_payment.py
!!!!!!!!!!!!!!!!!!! Interrupted: 20 errors during collection !!!!!!!!!!!!!!!!!!!
============================== 20 errors in 0.56s ==============================
--------------------------------------------
Test Run Finished: 2025-07-02 14:40:05
Duration: 4 seconds
Status: FAILURE
Exit Code: 2
============================================
========== Linting Errors ==========
0
========== End of Linting ==========
============================================
Test Run Started: 2025-07-02 14:42:58
--------------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.10.18, pytest-8.3.5, pluggy-1.6.0 -- /opt/hostedtoolcache/Python/3.10.18/x64/bin/python
cachedir: .pytest_cache
metadata: {'Python': '3.10.18', 'Platform': 'Linux-6.11.0-1015-azure-x86_64-with-glibc2.39', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'metadata': '3.1.1', 'rerunfailures': '15.1', 'html': '4.1.1', 'Faker': '37.4.0', 'xdist': '3.8.0'}, 'CI': 'true', 'JAVA_HOME': '/usr/lib/jvm/temurin-17-jdk-amd64'}
rootdir: /home/runner/work/Mocha_accounting/Mocha_accounting
plugins: metadata-3.1.1, rerunfailures-15.1, html-4.1.1, Faker-37.4.0, xdist-3.8.0
collecting ... collected 0 items / 1 error

==================================== ERRORS ====================================
_____________________ ERROR collecting tests/test_login.py _____________________
ImportError while importing test module '/home/runner/work/Mocha_accounting/Mocha_accounting/tests/test_login.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_login.py:13: in <module>
    from pages.login_page import LoginPage
pages/login_page.py:4: in <module>
    from actions.actions import Actions
actions/actions.py:3: in <module>
    from asyncio import timeout
E   ImportError: cannot import name 'timeout' from 'asyncio' (/opt/hostedtoolcache/Python/3.10.18/x64/lib/python3.10/asyncio/__init__.py)
- Generated html report: file:///home/runner/work/Mocha_accounting/Mocha_accounting/C%3A%5CUsers%5CTaurus13%5CPycharmProjects%5CPythonProject%5Creports/20250702_144301/report.html -
=========================== short test summary info ============================
ERROR tests/test_login.py
!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!
=============================== 1 error in 0.17s ===============================
--------------------------------------------
Test Run Finished: 2025-07-02 14:43:01
Duration: 3 seconds
Status: FAILURE
Exit Code: 2
============================================
========== Linting Errors ==========
0
========== End of Linting ==========
============================================
Test Run Started: 2025-07-02 14:54:56
--------------------------------------------
============================= test session starts ==============================
platform linux -- Python 3.13.5, pytest-8.3.5, pluggy-1.6.0 -- /opt/hostedtoolcache/Python/3.13.5/x64/bin/python
cachedir: .pytest_cache
metadata: {'Python': '3.13.5', 'Platform': 'Linux-6.11.0-1015-azure-x86_64-with-glibc2.39', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'metadata': '3.1.1', 'rerunfailures': '15.1', 'html': '4.1.1', 'Faker': '37.4.0', 'xdist': '3.8.0'}, 'CI': 'true', 'JAVA_HOME': '/usr/lib/jvm/temurin-17-jdk-amd64'}
rootdir: /home/runner/work/Mocha_accounting/Mocha_accounting
plugins: metadata-3.1.1, rerunfailures-15.1, html-4.1.1, Faker-37.4.0, xdist-3.8.0
collecting ... collected 19 items

tests/test_login.py::test_valid_login[ranjeet.gupta@mochatechnologies.com-Ais@1234] ERROR [  5%]
tests/test_login.py::test_valid_login[samatakamble9@gmail.com-Samata@16] ERROR [ 10%]
tests/test_login.py::test_valid_login[shubhamdabir07@gmail.com-Shubham@1234] ERROR [ 15%]
tests/test_login.py::test_valid_login[hrishikesh.shinde1607@gmail.com-Hrishikesh@1234] ERROR [ 21%]
tests/test_login.py::test_invalid_email_login[username0] ERROR           [ 26%]
tests/test_login.py::test_invalid_email_login[username1] ERROR           [ 31%]
tests/test_login.py::test_invalid_email_login[username2] ERROR           [ 36%]
tests/test_login.py::test_invalid_email_login[username3] ERROR           [ 42%]
tests/test_login.py::test_invalid_password_login[ranjeet.gupta@mochatechnologies.com-Password@123] ERROR [ 47%]
tests/test_login.py::test_invalid_password_login[samatakamble9@gmail.com-Password@12] ERROR [ 52%]
tests/test_login.py::test_invalid_password_login[shubhamdabir07@gmail.com-Password] ERROR [ 57%]
tests/test_login.py::test_invalid_password_login[hrishikesh.shinde1607@gmail.com-payer@1234] ERROR [ 63%]
tests/test_login.py::test_blank_username_validation ERROR                [ 68%]
tests/test_login.py::test_blank_password_validation ERROR                [ 73%]
tests/test_login.py::test_invalid_email_validation[username0] ERROR      [ 78%]
tests/test_login.py::test_invalid_email_validation[username1] ERROR      [ 84%]
tests/test_login.py::test_invalid_email_validation[username2] ERROR      [ 89%]
tests/test_login.py::test_invalid_email_validation[username3] ERROR      [ 94%]
tests/test_login.py::test_invalid_email_validation[username4] ERROR      [100%]

==================================== ERRORS ====================================
_ ERROR at setup of test_valid_login[ranjeet.gupta@mochatechnologies.com-Ais@1234] _

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f6d217f0>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x555fb586b336 \\u003Cunknown>\\n#17 0x7f588a49caa4 \\u003Cunknown>\\n#18 0x7f588a529c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x555fb586c45a <unknown>
E       #1 0x555fb5311760 <unknown>
E       #2 0x555fb534c0d8 <unknown>
E       #3 0x555fb53472cf <unknown>
E       #4 0x555fb53978d6 <unknown>
E       #5 0x555fb5396f96 <unknown>
E       #6 0x555fb5388c23 <unknown>
E       #7 0x555fb53554a5 <unknown>
E       #8 0x555fb5356111 <unknown>
E       #9 0x555fb5830f1b <unknown>
E       #10 0x555fb5834e19 <unknown>
E       #11 0x555fb5817ac9 <unknown>
E       #12 0x555fb58359c8 <unknown>
E       #13 0x555fb57fc34f <unknown>
E       #14 0x555fb5859a28 <unknown>
E       #15 0x555fb5859c06 <unknown>
E       #16 0x555fb586b336 <unknown>
E       #17 0x7f588a49caa4 <unknown>
E       #18 0x7f588a529c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x555fb586c45a <unknown>
E           #1 0x555fb5311760 <unknown>
E           #2 0x555fb534c0d8 <unknown>
E           #3 0x555fb53472cf <unknown>
E           #4 0x555fb53978d6 <unknown>
E           #5 0x555fb5396f96 <unknown>
E           #6 0x555fb5388c23 <unknown>
E           #7 0x555fb53554a5 <unknown>
E           #8 0x555fb5356111 <unknown>
E           #9 0x555fb5830f1b <unknown>
E           #10 0x555fb5834e19 <unknown>
E           #11 0x555fb5817ac9 <unknown>
E           #12 0x555fb58359c8 <unknown>
E           #13 0x555fb57fc34f <unknown>
E           #14 0x555fb5859a28 <unknown>
E           #15 0x555fb5859c06 <unknown>
E           #16 0x555fb586b336 <unknown>
E           #17 0x7f588a49caa4 <unknown>
E           #18 0x7f588a529c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:54:58,435 - INFO - Test data loaded successfully.
2025-07-02 14:54:58,435 - INFO - Starting test with Chrome browser
2025-07-02 14:54:58,435 - INFO - ====== WebDriver manager ======
2025-07-02 14:54:59,563 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:54:59,596 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:54:59,627 - INFO - There is no [linux64] chromedriver "137.0.7151.119" for browser google-chrome "137.0.7151" in cache
2025-07-02 14:54:59,627 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:54:59,717 - INFO - WebDriver version 137.0.7151.119 selected
2025-07-02 14:54:59,719 - INFO - Modern chrome version https://storage.googleapis.com/chrome-for-testing-public/137.0.7151.119/linux64/chromedriver-linux64.zip
2025-07-02 14:54:59,720 - INFO - About to download new driver from https://storage.googleapis.com/chrome-for-testing-public/137.0.7151.119/linux64/chromedriver-linux64.zip
2025-07-02 14:54:59,766 - INFO - Driver downloading response is 200
2025-07-02 14:54:59,865 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:00,007 - INFO - Driver has been saved in cache [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119]
2025-07-02 14:55:02,185 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x555fb586c45a <unknown>
#1 0x555fb5311760 <unknown>
#2 0x555fb534c0d8 <unknown>
#3 0x555fb53472cf <unknown>
#4 0x555fb53978d6 <unknown>
#5 0x555fb5396f96 <unknown>
#6 0x555fb5388c23 <unknown>
#7 0x555fb53554a5 <unknown>
#8 0x555fb5356111 <unknown>
#9 0x555fb5830f1b <unknown>
#10 0x555fb5834e19 <unknown>
#11 0x555fb5817ac9 <unknown>
#12 0x555fb58359c8 <unknown>
#13 0x555fb57fc34f <unknown>
#14 0x555fb5859a28 <unknown>
#15 0x555fb5859c06 <unknown>
#16 0x555fb586b336 <unknown>
#17 0x7f588a49caa4 <unknown>
#18 0x7f588a529c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:79 Test data loaded successfully.
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 There is no [linux64] chromedriver "137.0.7151.119" for browser google-chrome "137.0.7151" in cache
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 WebDriver version 137.0.7151.119 selected
INFO     WDM:logger.py:11 Modern chrome version https://storage.googleapis.com/chrome-for-testing-public/137.0.7151.119/linux64/chromedriver-linux64.zip
INFO     WDM:logger.py:11 About to download new driver from https://storage.googleapis.com/chrome-for-testing-public/137.0.7151.119/linux64/chromedriver-linux64.zip
INFO     WDM:logger.py:11 Driver downloading response is 200
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver has been saved in cache [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119]
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x555fb586c45a <unknown>
#1 0x555fb5311760 <unknown>
#2 0x555fb534c0d8 <unknown>
#3 0x555fb53472cf <unknown>
#4 0x555fb53978d6 <unknown>
#5 0x555fb5396f96 <unknown>
#6 0x555fb5388c23 <unknown>
#7 0x555fb53554a5 <unknown>
#8 0x555fb5356111 <unknown>
#9 0x555fb5830f1b <unknown>
#10 0x555fb5834e19 <unknown>
#11 0x555fb5817ac9 <unknown>
#12 0x555fb58359c8 <unknown>
#13 0x555fb57fc34f <unknown>
#14 0x555fb5859a28 <unknown>
#15 0x555fb5859c06 <unknown>
#16 0x555fb586b336 <unknown>
#17 0x7f588a49caa4 <unknown>
#18 0x7f588a529c3c <unknown>
____ ERROR at setup of test_valid_login[samatakamble9@gmail.com-Samata@16] _____

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f6d2ee90>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x55d375c17336 \\u003Cunknown>\\n#17 0x7fae31a9caa4 \\u003Cunknown>\\n#18 0x7fae31b29c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x55d375c1845a <unknown>
E       #1 0x55d3756bd760 <unknown>
E       #2 0x55d3756f80d8 <unknown>
E       #3 0x55d3756f32cf <unknown>
E       #4 0x55d3757438d6 <unknown>
E       #5 0x55d375742f96 <unknown>
E       #6 0x55d375734c23 <unknown>
E       #7 0x55d3757014a5 <unknown>
E       #8 0x55d375702111 <unknown>
E       #9 0x55d375bdcf1b <unknown>
E       #10 0x55d375be0e19 <unknown>
E       #11 0x55d375bc3ac9 <unknown>
E       #12 0x55d375be19c8 <unknown>
E       #13 0x55d375ba834f <unknown>
E       #14 0x55d375c05a28 <unknown>
E       #15 0x55d375c05c06 <unknown>
E       #16 0x55d375c17336 <unknown>
E       #17 0x7fae31a9caa4 <unknown>
E       #18 0x7fae31b29c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x55d375c1845a <unknown>
E           #1 0x55d3756bd760 <unknown>
E           #2 0x55d3756f80d8 <unknown>
E           #3 0x55d3756f32cf <unknown>
E           #4 0x55d3757438d6 <unknown>
E           #5 0x55d375742f96 <unknown>
E           #6 0x55d375734c23 <unknown>
E           #7 0x55d3757014a5 <unknown>
E           #8 0x55d375702111 <unknown>
E           #9 0x55d375bdcf1b <unknown>
E           #10 0x55d375be0e19 <unknown>
E           #11 0x55d375bc3ac9 <unknown>
E           #12 0x55d375be19c8 <unknown>
E           #13 0x55d375ba834f <unknown>
E           #14 0x55d375c05a28 <unknown>
E           #15 0x55d375c05c06 <unknown>
E           #16 0x55d375c17336 <unknown>
E           #17 0x7fae31a9caa4 <unknown>
E           #18 0x7fae31b29c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:55:02,250 - INFO - Starting test with Chrome browser
2025-07-02 14:55:02,251 - INFO - ====== WebDriver manager ======
2025-07-02 14:55:02,357 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:02,391 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:02,437 - INFO - Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
2025-07-02 14:55:03,528 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x55d375c1845a <unknown>
#1 0x55d3756bd760 <unknown>
#2 0x55d3756f80d8 <unknown>
#3 0x55d3756f32cf <unknown>
#4 0x55d3757438d6 <unknown>
#5 0x55d375742f96 <unknown>
#6 0x55d375734c23 <unknown>
#7 0x55d3757014a5 <unknown>
#8 0x55d375702111 <unknown>
#9 0x55d375bdcf1b <unknown>
#10 0x55d375be0e19 <unknown>
#11 0x55d375bc3ac9 <unknown>
#12 0x55d375be19c8 <unknown>
#13 0x55d375ba834f <unknown>
#14 0x55d375c05a28 <unknown>
#15 0x55d375c05c06 <unknown>
#16 0x55d375c17336 <unknown>
#17 0x7fae31a9caa4 <unknown>
#18 0x7fae31b29c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x55d375c1845a <unknown>
#1 0x55d3756bd760 <unknown>
#2 0x55d3756f80d8 <unknown>
#3 0x55d3756f32cf <unknown>
#4 0x55d3757438d6 <unknown>
#5 0x55d375742f96 <unknown>
#6 0x55d375734c23 <unknown>
#7 0x55d3757014a5 <unknown>
#8 0x55d375702111 <unknown>
#9 0x55d375bdcf1b <unknown>
#10 0x55d375be0e19 <unknown>
#11 0x55d375bc3ac9 <unknown>
#12 0x55d375be19c8 <unknown>
#13 0x55d375ba834f <unknown>
#14 0x55d375c05a28 <unknown>
#15 0x55d375c05c06 <unknown>
#16 0x55d375c17336 <unknown>
#17 0x7fae31a9caa4 <unknown>
#18 0x7fae31b29c3c <unknown>
__ ERROR at setup of test_valid_login[shubhamdabir07@gmail.com-Shubham@1234] ___

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f6cec690>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x55d0048e9336 \\u003Cunknown>\\n#17 0x7f71dc49caa4 \\u003Cunknown>\\n#18 0x7f71dc529c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x55d0048ea45a <unknown>
E       #1 0x55d00438f760 <unknown>
E       #2 0x55d0043ca0d8 <unknown>
E       #3 0x55d0043c52cf <unknown>
E       #4 0x55d0044158d6 <unknown>
E       #5 0x55d004414f96 <unknown>
E       #6 0x55d004406c23 <unknown>
E       #7 0x55d0043d34a5 <unknown>
E       #8 0x55d0043d4111 <unknown>
E       #9 0x55d0048aef1b <unknown>
E       #10 0x55d0048b2e19 <unknown>
E       #11 0x55d004895ac9 <unknown>
E       #12 0x55d0048b39c8 <unknown>
E       #13 0x55d00487a34f <unknown>
E       #14 0x55d0048d7a28 <unknown>
E       #15 0x55d0048d7c06 <unknown>
E       #16 0x55d0048e9336 <unknown>
E       #17 0x7f71dc49caa4 <unknown>
E       #18 0x7f71dc529c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x55d0048ea45a <unknown>
E           #1 0x55d00438f760 <unknown>
E           #2 0x55d0043ca0d8 <unknown>
E           #3 0x55d0043c52cf <unknown>
E           #4 0x55d0044158d6 <unknown>
E           #5 0x55d004414f96 <unknown>
E           #6 0x55d004406c23 <unknown>
E           #7 0x55d0043d34a5 <unknown>
E           #8 0x55d0043d4111 <unknown>
E           #9 0x55d0048aef1b <unknown>
E           #10 0x55d0048b2e19 <unknown>
E           #11 0x55d004895ac9 <unknown>
E           #12 0x55d0048b39c8 <unknown>
E           #13 0x55d00487a34f <unknown>
E           #14 0x55d0048d7a28 <unknown>
E           #15 0x55d0048d7c06 <unknown>
E           #16 0x55d0048e9336 <unknown>
E           #17 0x7f71dc49caa4 <unknown>
E           #18 0x7f71dc529c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:55:03,567 - INFO - Starting test with Chrome browser
2025-07-02 14:55:03,567 - INFO - ====== WebDriver manager ======
2025-07-02 14:55:03,673 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:03,707 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:03,740 - INFO - Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
2025-07-02 14:55:04,829 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x55d0048ea45a <unknown>
#1 0x55d00438f760 <unknown>
#2 0x55d0043ca0d8 <unknown>
#3 0x55d0043c52cf <unknown>
#4 0x55d0044158d6 <unknown>
#5 0x55d004414f96 <unknown>
#6 0x55d004406c23 <unknown>
#7 0x55d0043d34a5 <unknown>
#8 0x55d0043d4111 <unknown>
#9 0x55d0048aef1b <unknown>
#10 0x55d0048b2e19 <unknown>
#11 0x55d004895ac9 <unknown>
#12 0x55d0048b39c8 <unknown>
#13 0x55d00487a34f <unknown>
#14 0x55d0048d7a28 <unknown>
#15 0x55d0048d7c06 <unknown>
#16 0x55d0048e9336 <unknown>
#17 0x7f71dc49caa4 <unknown>
#18 0x7f71dc529c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x55d0048ea45a <unknown>
#1 0x55d00438f760 <unknown>
#2 0x55d0043ca0d8 <unknown>
#3 0x55d0043c52cf <unknown>
#4 0x55d0044158d6 <unknown>
#5 0x55d004414f96 <unknown>
#6 0x55d004406c23 <unknown>
#7 0x55d0043d34a5 <unknown>
#8 0x55d0043d4111 <unknown>
#9 0x55d0048aef1b <unknown>
#10 0x55d0048b2e19 <unknown>
#11 0x55d004895ac9 <unknown>
#12 0x55d0048b39c8 <unknown>
#13 0x55d00487a34f <unknown>
#14 0x55d0048d7a28 <unknown>
#15 0x55d0048d7c06 <unknown>
#16 0x55d0048e9336 <unknown>
#17 0x7f71dc49caa4 <unknown>
#18 0x7f71dc529c3c <unknown>
_ ERROR at setup of test_valid_login[hrishikesh.shinde1607@gmail.com-Hrishikesh@1234] _

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f5ef4770>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x564591069336 \\u003Cunknown>\\n#17 0x7f6a8ec9caa4 \\u003Cunknown>\\n#18 0x7f6a8ed29c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x56459106a45a <unknown>
E       #1 0x564590b0f760 <unknown>
E       #2 0x564590b4a0d8 <unknown>
E       #3 0x564590b452cf <unknown>
E       #4 0x564590b958d6 <unknown>
E       #5 0x564590b94f96 <unknown>
E       #6 0x564590b86c23 <unknown>
E       #7 0x564590b534a5 <unknown>
E       #8 0x564590b54111 <unknown>
E       #9 0x56459102ef1b <unknown>
E       #10 0x564591032e19 <unknown>
E       #11 0x564591015ac9 <unknown>
E       #12 0x5645910339c8 <unknown>
E       #13 0x564590ffa34f <unknown>
E       #14 0x564591057a28 <unknown>
E       #15 0x564591057c06 <unknown>
E       #16 0x564591069336 <unknown>
E       #17 0x7f6a8ec9caa4 <unknown>
E       #18 0x7f6a8ed29c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x56459106a45a <unknown>
E           #1 0x564590b0f760 <unknown>
E           #2 0x564590b4a0d8 <unknown>
E           #3 0x564590b452cf <unknown>
E           #4 0x564590b958d6 <unknown>
E           #5 0x564590b94f96 <unknown>
E           #6 0x564590b86c23 <unknown>
E           #7 0x564590b534a5 <unknown>
E           #8 0x564590b54111 <unknown>
E           #9 0x56459102ef1b <unknown>
E           #10 0x564591032e19 <unknown>
E           #11 0x564591015ac9 <unknown>
E           #12 0x5645910339c8 <unknown>
E           #13 0x564590ffa34f <unknown>
E           #14 0x564591057a28 <unknown>
E           #15 0x564591057c06 <unknown>
E           #16 0x564591069336 <unknown>
E           #17 0x7f6a8ec9caa4 <unknown>
E           #18 0x7f6a8ed29c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:55:04,866 - INFO - Starting test with Chrome browser
2025-07-02 14:55:04,866 - INFO - ====== WebDriver manager ======
2025-07-02 14:55:04,972 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:05,010 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:05,041 - INFO - Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
2025-07-02 14:55:06,133 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x56459106a45a <unknown>
#1 0x564590b0f760 <unknown>
#2 0x564590b4a0d8 <unknown>
#3 0x564590b452cf <unknown>
#4 0x564590b958d6 <unknown>
#5 0x564590b94f96 <unknown>
#6 0x564590b86c23 <unknown>
#7 0x564590b534a5 <unknown>
#8 0x564590b54111 <unknown>
#9 0x56459102ef1b <unknown>
#10 0x564591032e19 <unknown>
#11 0x564591015ac9 <unknown>
#12 0x5645910339c8 <unknown>
#13 0x564590ffa34f <unknown>
#14 0x564591057a28 <unknown>
#15 0x564591057c06 <unknown>
#16 0x564591069336 <unknown>
#17 0x7f6a8ec9caa4 <unknown>
#18 0x7f6a8ed29c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x56459106a45a <unknown>
#1 0x564590b0f760 <unknown>
#2 0x564590b4a0d8 <unknown>
#3 0x564590b452cf <unknown>
#4 0x564590b958d6 <unknown>
#5 0x564590b94f96 <unknown>
#6 0x564590b86c23 <unknown>
#7 0x564590b534a5 <unknown>
#8 0x564590b54111 <unknown>
#9 0x56459102ef1b <unknown>
#10 0x564591032e19 <unknown>
#11 0x564591015ac9 <unknown>
#12 0x5645910339c8 <unknown>
#13 0x564590ffa34f <unknown>
#14 0x564591057a28 <unknown>
#15 0x564591057c06 <unknown>
#16 0x564591069336 <unknown>
#17 0x7f6a8ec9caa4 <unknown>
#18 0x7f6a8ed29c3c <unknown>
____________ ERROR at setup of test_invalid_email_login[username0] _____________

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f5ef5940>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x562df1ad5336 \\u003Cunknown>\\n#17 0x7fa19aa9caa4 \\u003Cunknown>\\n#18 0x7fa19ab29c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x562df1ad645a <unknown>
E       #1 0x562df157b760 <unknown>
E       #2 0x562df15b60d8 <unknown>
E       #3 0x562df15b12cf <unknown>
E       #4 0x562df16018d6 <unknown>
E       #5 0x562df1600f96 <unknown>
E       #6 0x562df15f2c23 <unknown>
E       #7 0x562df15bf4a5 <unknown>
E       #8 0x562df15c0111 <unknown>
E       #9 0x562df1a9af1b <unknown>
E       #10 0x562df1a9ee19 <unknown>
E       #11 0x562df1a81ac9 <unknown>
E       #12 0x562df1a9f9c8 <unknown>
E       #13 0x562df1a6634f <unknown>
E       #14 0x562df1ac3a28 <unknown>
E       #15 0x562df1ac3c06 <unknown>
E       #16 0x562df1ad5336 <unknown>
E       #17 0x7fa19aa9caa4 <unknown>
E       #18 0x7fa19ab29c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x562df1ad645a <unknown>
E           #1 0x562df157b760 <unknown>
E           #2 0x562df15b60d8 <unknown>
E           #3 0x562df15b12cf <unknown>
E           #4 0x562df16018d6 <unknown>
E           #5 0x562df1600f96 <unknown>
E           #6 0x562df15f2c23 <unknown>
E           #7 0x562df15bf4a5 <unknown>
E           #8 0x562df15c0111 <unknown>
E           #9 0x562df1a9af1b <unknown>
E           #10 0x562df1a9ee19 <unknown>
E           #11 0x562df1a81ac9 <unknown>
E           #12 0x562df1a9f9c8 <unknown>
E           #13 0x562df1a6634f <unknown>
E           #14 0x562df1ac3a28 <unknown>
E           #15 0x562df1ac3c06 <unknown>
E           #16 0x562df1ad5336 <unknown>
E           #17 0x7fa19aa9caa4 <unknown>
E           #18 0x7fa19ab29c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:55:06,170 - INFO - Starting test with Chrome browser
2025-07-02 14:55:06,170 - INFO - ====== WebDriver manager ======
2025-07-02 14:55:06,279 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:06,311 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:06,343 - INFO - Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
2025-07-02 14:55:07,433 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x562df1ad645a <unknown>
#1 0x562df157b760 <unknown>
#2 0x562df15b60d8 <unknown>
#3 0x562df15b12cf <unknown>
#4 0x562df16018d6 <unknown>
#5 0x562df1600f96 <unknown>
#6 0x562df15f2c23 <unknown>
#7 0x562df15bf4a5 <unknown>
#8 0x562df15c0111 <unknown>
#9 0x562df1a9af1b <unknown>
#10 0x562df1a9ee19 <unknown>
#11 0x562df1a81ac9 <unknown>
#12 0x562df1a9f9c8 <unknown>
#13 0x562df1a6634f <unknown>
#14 0x562df1ac3a28 <unknown>
#15 0x562df1ac3c06 <unknown>
#16 0x562df1ad5336 <unknown>
#17 0x7fa19aa9caa4 <unknown>
#18 0x7fa19ab29c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x562df1ad645a <unknown>
#1 0x562df157b760 <unknown>
#2 0x562df15b60d8 <unknown>
#3 0x562df15b12cf <unknown>
#4 0x562df16018d6 <unknown>
#5 0x562df1600f96 <unknown>
#6 0x562df15f2c23 <unknown>
#7 0x562df15bf4a5 <unknown>
#8 0x562df15c0111 <unknown>
#9 0x562df1a9af1b <unknown>
#10 0x562df1a9ee19 <unknown>
#11 0x562df1a81ac9 <unknown>
#12 0x562df1a9f9c8 <unknown>
#13 0x562df1a6634f <unknown>
#14 0x562df1ac3a28 <unknown>
#15 0x562df1ac3c06 <unknown>
#16 0x562df1ad5336 <unknown>
#17 0x7fa19aa9caa4 <unknown>
#18 0x7fa19ab29c3c <unknown>
____________ ERROR at setup of test_invalid_email_login[username1] _____________

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f7bf4830>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x555f7572c336 \\u003Cunknown>\\n#17 0x7f6fd889caa4 \\u003Cunknown>\\n#18 0x7f6fd8929c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x555f7572d45a <unknown>
E       #1 0x555f751d2760 <unknown>
E       #2 0x555f7520d0d8 <unknown>
E       #3 0x555f752082cf <unknown>
E       #4 0x555f752588d6 <unknown>
E       #5 0x555f75257f96 <unknown>
E       #6 0x555f75249c23 <unknown>
E       #7 0x555f752164a5 <unknown>
E       #8 0x555f75217111 <unknown>
E       #9 0x555f756f1f1b <unknown>
E       #10 0x555f756f5e19 <unknown>
E       #11 0x555f756d8ac9 <unknown>
E       #12 0x555f756f69c8 <unknown>
E       #13 0x555f756bd34f <unknown>
E       #14 0x555f7571aa28 <unknown>
E       #15 0x555f7571ac06 <unknown>
E       #16 0x555f7572c336 <unknown>
E       #17 0x7f6fd889caa4 <unknown>
E       #18 0x7f6fd8929c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x555f7572d45a <unknown>
E           #1 0x555f751d2760 <unknown>
E           #2 0x555f7520d0d8 <unknown>
E           #3 0x555f752082cf <unknown>
E           #4 0x555f752588d6 <unknown>
E           #5 0x555f75257f96 <unknown>
E           #6 0x555f75249c23 <unknown>
E           #7 0x555f752164a5 <unknown>
E           #8 0x555f75217111 <unknown>
E           #9 0x555f756f1f1b <unknown>
E           #10 0x555f756f5e19 <unknown>
E           #11 0x555f756d8ac9 <unknown>
E           #12 0x555f756f69c8 <unknown>
E           #13 0x555f756bd34f <unknown>
E           #14 0x555f7571aa28 <unknown>
E           #15 0x555f7571ac06 <unknown>
E           #16 0x555f7572c336 <unknown>
E           #17 0x7f6fd889caa4 <unknown>
E           #18 0x7f6fd8929c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:55:07,471 - INFO - Starting test with Chrome browser
2025-07-02 14:55:07,471 - INFO - ====== WebDriver manager ======
2025-07-02 14:55:07,577 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:07,609 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:07,640 - INFO - Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
2025-07-02 14:55:08,729 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x555f7572d45a <unknown>
#1 0x555f751d2760 <unknown>
#2 0x555f7520d0d8 <unknown>
#3 0x555f752082cf <unknown>
#4 0x555f752588d6 <unknown>
#5 0x555f75257f96 <unknown>
#6 0x555f75249c23 <unknown>
#7 0x555f752164a5 <unknown>
#8 0x555f75217111 <unknown>
#9 0x555f756f1f1b <unknown>
#10 0x555f756f5e19 <unknown>
#11 0x555f756d8ac9 <unknown>
#12 0x555f756f69c8 <unknown>
#13 0x555f756bd34f <unknown>
#14 0x555f7571aa28 <unknown>
#15 0x555f7571ac06 <unknown>
#16 0x555f7572c336 <unknown>
#17 0x7f6fd889caa4 <unknown>
#18 0x7f6fd8929c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x555f7572d45a <unknown>
#1 0x555f751d2760 <unknown>
#2 0x555f7520d0d8 <unknown>
#3 0x555f752082cf <unknown>
#4 0x555f752588d6 <unknown>
#5 0x555f75257f96 <unknown>
#6 0x555f75249c23 <unknown>
#7 0x555f752164a5 <unknown>
#8 0x555f75217111 <unknown>
#9 0x555f756f1f1b <unknown>
#10 0x555f756f5e19 <unknown>
#11 0x555f756d8ac9 <unknown>
#12 0x555f756f69c8 <unknown>
#13 0x555f756bd34f <unknown>
#14 0x555f7571aa28 <unknown>
#15 0x555f7571ac06 <unknown>
#16 0x555f7572c336 <unknown>
#17 0x7f6fd889caa4 <unknown>
#18 0x7f6fd8929c3c <unknown>
____________ ERROR at setup of test_invalid_email_login[username2] _____________

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f6cd2690>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x563f131ba336 \\u003Cunknown>\\n#17 0x7fc6e0c9caa4 \\u003Cunknown>\\n#18 0x7fc6e0d29c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x563f131bb45a <unknown>
E       #1 0x563f12c60760 <unknown>
E       #2 0x563f12c9b0d8 <unknown>
E       #3 0x563f12c962cf <unknown>
E       #4 0x563f12ce68d6 <unknown>
E       #5 0x563f12ce5f96 <unknown>
E       #6 0x563f12cd7c23 <unknown>
E       #7 0x563f12ca44a5 <unknown>
E       #8 0x563f12ca5111 <unknown>
E       #9 0x563f1317ff1b <unknown>
E       #10 0x563f13183e19 <unknown>
E       #11 0x563f13166ac9 <unknown>
E       #12 0x563f131849c8 <unknown>
E       #13 0x563f1314b34f <unknown>
E       #14 0x563f131a8a28 <unknown>
E       #15 0x563f131a8c06 <unknown>
E       #16 0x563f131ba336 <unknown>
E       #17 0x7fc6e0c9caa4 <unknown>
E       #18 0x7fc6e0d29c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x563f131bb45a <unknown>
E           #1 0x563f12c60760 <unknown>
E           #2 0x563f12c9b0d8 <unknown>
E           #3 0x563f12c962cf <unknown>
E           #4 0x563f12ce68d6 <unknown>
E           #5 0x563f12ce5f96 <unknown>
E           #6 0x563f12cd7c23 <unknown>
E           #7 0x563f12ca44a5 <unknown>
E           #8 0x563f12ca5111 <unknown>
E           #9 0x563f1317ff1b <unknown>
E           #10 0x563f13183e19 <unknown>
E           #11 0x563f13166ac9 <unknown>
E           #12 0x563f131849c8 <unknown>
E           #13 0x563f1314b34f <unknown>
E           #14 0x563f131a8a28 <unknown>
E           #15 0x563f131a8c06 <unknown>
E           #16 0x563f131ba336 <unknown>
E           #17 0x7fc6e0c9caa4 <unknown>
E           #18 0x7fc6e0d29c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:55:08,768 - INFO - Starting test with Chrome browser
2025-07-02 14:55:08,768 - INFO - ====== WebDriver manager ======
2025-07-02 14:55:08,875 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:08,906 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:08,937 - INFO - Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
2025-07-02 14:55:10,027 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x563f131bb45a <unknown>
#1 0x563f12c60760 <unknown>
#2 0x563f12c9b0d8 <unknown>
#3 0x563f12c962cf <unknown>
#4 0x563f12ce68d6 <unknown>
#5 0x563f12ce5f96 <unknown>
#6 0x563f12cd7c23 <unknown>
#7 0x563f12ca44a5 <unknown>
#8 0x563f12ca5111 <unknown>
#9 0x563f1317ff1b <unknown>
#10 0x563f13183e19 <unknown>
#11 0x563f13166ac9 <unknown>
#12 0x563f131849c8 <unknown>
#13 0x563f1314b34f <unknown>
#14 0x563f131a8a28 <unknown>
#15 0x563f131a8c06 <unknown>
#16 0x563f131ba336 <unknown>
#17 0x7fc6e0c9caa4 <unknown>
#18 0x7fc6e0d29c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x563f131bb45a <unknown>
#1 0x563f12c60760 <unknown>
#2 0x563f12c9b0d8 <unknown>
#3 0x563f12c962cf <unknown>
#4 0x563f12ce68d6 <unknown>
#5 0x563f12ce5f96 <unknown>
#6 0x563f12cd7c23 <unknown>
#7 0x563f12ca44a5 <unknown>
#8 0x563f12ca5111 <unknown>
#9 0x563f1317ff1b <unknown>
#10 0x563f13183e19 <unknown>
#11 0x563f13166ac9 <unknown>
#12 0x563f131849c8 <unknown>
#13 0x563f1314b34f <unknown>
#14 0x563f131a8a28 <unknown>
#15 0x563f131a8c06 <unknown>
#16 0x563f131ba336 <unknown>
#17 0x7fc6e0c9caa4 <unknown>
#18 0x7fc6e0d29c3c <unknown>
____________ ERROR at setup of test_invalid_email_login[username3] _____________

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f7bfacf0>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x55cae05dc336 \\u003Cunknown>\\n#17 0x7fa20f69caa4 \\u003Cunknown>\\n#18 0x7fa20f729c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x55cae05dd45a <unknown>
E       #1 0x55cae0082760 <unknown>
E       #2 0x55cae00bd0d8 <unknown>
E       #3 0x55cae00b82cf <unknown>
E       #4 0x55cae01088d6 <unknown>
E       #5 0x55cae0107f96 <unknown>
E       #6 0x55cae00f9c23 <unknown>
E       #7 0x55cae00c64a5 <unknown>
E       #8 0x55cae00c7111 <unknown>
E       #9 0x55cae05a1f1b <unknown>
E       #10 0x55cae05a5e19 <unknown>
E       #11 0x55cae0588ac9 <unknown>
E       #12 0x55cae05a69c8 <unknown>
E       #13 0x55cae056d34f <unknown>
E       #14 0x55cae05caa28 <unknown>
E       #15 0x55cae05cac06 <unknown>
E       #16 0x55cae05dc336 <unknown>
E       #17 0x7fa20f69caa4 <unknown>
E       #18 0x7fa20f729c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x55cae05dd45a <unknown>
E           #1 0x55cae0082760 <unknown>
E           #2 0x55cae00bd0d8 <unknown>
E           #3 0x55cae00b82cf <unknown>
E           #4 0x55cae01088d6 <unknown>
E           #5 0x55cae0107f96 <unknown>
E           #6 0x55cae00f9c23 <unknown>
E           #7 0x55cae00c64a5 <unknown>
E           #8 0x55cae00c7111 <unknown>
E           #9 0x55cae05a1f1b <unknown>
E           #10 0x55cae05a5e19 <unknown>
E           #11 0x55cae0588ac9 <unknown>
E           #12 0x55cae05a69c8 <unknown>
E           #13 0x55cae056d34f <unknown>
E           #14 0x55cae05caa28 <unknown>
E           #15 0x55cae05cac06 <unknown>
E           #16 0x55cae05dc336 <unknown>
E           #17 0x7fa20f69caa4 <unknown>
E           #18 0x7fa20f729c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:55:10,064 - INFO - Starting test with Chrome browser
2025-07-02 14:55:10,064 - INFO - ====== WebDriver manager ======
2025-07-02 14:55:10,172 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:10,203 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:10,234 - INFO - Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
2025-07-02 14:55:11,324 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x55cae05dd45a <unknown>
#1 0x55cae0082760 <unknown>
#2 0x55cae00bd0d8 <unknown>
#3 0x55cae00b82cf <unknown>
#4 0x55cae01088d6 <unknown>
#5 0x55cae0107f96 <unknown>
#6 0x55cae00f9c23 <unknown>
#7 0x55cae00c64a5 <unknown>
#8 0x55cae00c7111 <unknown>
#9 0x55cae05a1f1b <unknown>
#10 0x55cae05a5e19 <unknown>
#11 0x55cae0588ac9 <unknown>
#12 0x55cae05a69c8 <unknown>
#13 0x55cae056d34f <unknown>
#14 0x55cae05caa28 <unknown>
#15 0x55cae05cac06 <unknown>
#16 0x55cae05dc336 <unknown>
#17 0x7fa20f69caa4 <unknown>
#18 0x7fa20f729c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x55cae05dd45a <unknown>
#1 0x55cae0082760 <unknown>
#2 0x55cae00bd0d8 <unknown>
#3 0x55cae00b82cf <unknown>
#4 0x55cae01088d6 <unknown>
#5 0x55cae0107f96 <unknown>
#6 0x55cae00f9c23 <unknown>
#7 0x55cae00c64a5 <unknown>
#8 0x55cae00c7111 <unknown>
#9 0x55cae05a1f1b <unknown>
#10 0x55cae05a5e19 <unknown>
#11 0x55cae0588ac9 <unknown>
#12 0x55cae05a69c8 <unknown>
#13 0x55cae056d34f <unknown>
#14 0x55cae05caa28 <unknown>
#15 0x55cae05cac06 <unknown>
#16 0x55cae05dc336 <unknown>
#17 0x7fa20f69caa4 <unknown>
#18 0x7fa20f729c3c <unknown>
_ ERROR at setup of test_invalid_password_login[ranjeet.gupta@mochatechnologies.com-Password@123] _

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f6cf0b50>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x564975392336 \\u003Cunknown>\\n#17 0x7f26d529caa4 \\u003Cunknown>\\n#18 0x7f26d5329c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x56497539345a <unknown>
E       #1 0x564974e38760 <unknown>
E       #2 0x564974e730d8 <unknown>
E       #3 0x564974e6e2cf <unknown>
E       #4 0x564974ebe8d6 <unknown>
E       #5 0x564974ebdf96 <unknown>
E       #6 0x564974eafc23 <unknown>
E       #7 0x564974e7c4a5 <unknown>
E       #8 0x564974e7d111 <unknown>
E       #9 0x564975357f1b <unknown>
E       #10 0x56497535be19 <unknown>
E       #11 0x56497533eac9 <unknown>
E       #12 0x56497535c9c8 <unknown>
E       #13 0x56497532334f <unknown>
E       #14 0x564975380a28 <unknown>
E       #15 0x564975380c06 <unknown>
E       #16 0x564975392336 <unknown>
E       #17 0x7f26d529caa4 <unknown>
E       #18 0x7f26d5329c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x56497539345a <unknown>
E           #1 0x564974e38760 <unknown>
E           #2 0x564974e730d8 <unknown>
E           #3 0x564974e6e2cf <unknown>
E           #4 0x564974ebe8d6 <unknown>
E           #5 0x564974ebdf96 <unknown>
E           #6 0x564974eafc23 <unknown>
E           #7 0x564974e7c4a5 <unknown>
E           #8 0x564974e7d111 <unknown>
E           #9 0x564975357f1b <unknown>
E           #10 0x56497535be19 <unknown>
E           #11 0x56497533eac9 <unknown>
E           #12 0x56497535c9c8 <unknown>
E           #13 0x56497532334f <unknown>
E           #14 0x564975380a28 <unknown>
E           #15 0x564975380c06 <unknown>
E           #16 0x564975392336 <unknown>
E           #17 0x7f26d529caa4 <unknown>
E           #18 0x7f26d5329c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:55:11,361 - INFO - Starting test with Chrome browser
2025-07-02 14:55:11,362 - INFO - ====== WebDriver manager ======
2025-07-02 14:55:11,468 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:11,499 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:11,531 - INFO - Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
2025-07-02 14:55:12,621 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x56497539345a <unknown>
#1 0x564974e38760 <unknown>
#2 0x564974e730d8 <unknown>
#3 0x564974e6e2cf <unknown>
#4 0x564974ebe8d6 <unknown>
#5 0x564974ebdf96 <unknown>
#6 0x564974eafc23 <unknown>
#7 0x564974e7c4a5 <unknown>
#8 0x564974e7d111 <unknown>
#9 0x564975357f1b <unknown>
#10 0x56497535be19 <unknown>
#11 0x56497533eac9 <unknown>
#12 0x56497535c9c8 <unknown>
#13 0x56497532334f <unknown>
#14 0x564975380a28 <unknown>
#15 0x564975380c06 <unknown>
#16 0x564975392336 <unknown>
#17 0x7f26d529caa4 <unknown>
#18 0x7f26d5329c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x56497539345a <unknown>
#1 0x564974e38760 <unknown>
#2 0x564974e730d8 <unknown>
#3 0x564974e6e2cf <unknown>
#4 0x564974ebe8d6 <unknown>
#5 0x564974ebdf96 <unknown>
#6 0x564974eafc23 <unknown>
#7 0x564974e7c4a5 <unknown>
#8 0x564974e7d111 <unknown>
#9 0x564975357f1b <unknown>
#10 0x56497535be19 <unknown>
#11 0x56497533eac9 <unknown>
#12 0x56497535c9c8 <unknown>
#13 0x56497532334f <unknown>
#14 0x564975380a28 <unknown>
#15 0x564975380c06 <unknown>
#16 0x564975392336 <unknown>
#17 0x7f26d529caa4 <unknown>
#18 0x7f26d5329c3c <unknown>
_ ERROR at setup of test_invalid_password_login[samatakamble9@gmail.com-Password@12] _

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f6cf3150>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x5561bd1c0336 \\u003Cunknown>\\n#17 0x7fc09ce9caa4 \\u003Cunknown>\\n#18 0x7fc09cf29c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x5561bd1c145a <unknown>
E       #1 0x5561bcc66760 <unknown>
E       #2 0x5561bcca10d8 <unknown>
E       #3 0x5561bcc9c2cf <unknown>
E       #4 0x5561bccec8d6 <unknown>
E       #5 0x5561bccebf96 <unknown>
E       #6 0x5561bccddc23 <unknown>
E       #7 0x5561bccaa4a5 <unknown>
E       #8 0x5561bccab111 <unknown>
E       #9 0x5561bd185f1b <unknown>
E       #10 0x5561bd189e19 <unknown>
E       #11 0x5561bd16cac9 <unknown>
E       #12 0x5561bd18a9c8 <unknown>
E       #13 0x5561bd15134f <unknown>
E       #14 0x5561bd1aea28 <unknown>
E       #15 0x5561bd1aec06 <unknown>
E       #16 0x5561bd1c0336 <unknown>
E       #17 0x7fc09ce9caa4 <unknown>
E       #18 0x7fc09cf29c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x5561bd1c145a <unknown>
E           #1 0x5561bcc66760 <unknown>
E           #2 0x5561bcca10d8 <unknown>
E           #3 0x5561bcc9c2cf <unknown>
E           #4 0x5561bccec8d6 <unknown>
E           #5 0x5561bccebf96 <unknown>
E           #6 0x5561bccddc23 <unknown>
E           #7 0x5561bccaa4a5 <unknown>
E           #8 0x5561bccab111 <unknown>
E           #9 0x5561bd185f1b <unknown>
E           #10 0x5561bd189e19 <unknown>
E           #11 0x5561bd16cac9 <unknown>
E           #12 0x5561bd18a9c8 <unknown>
E           #13 0x5561bd15134f <unknown>
E           #14 0x5561bd1aea28 <unknown>
E           #15 0x5561bd1aec06 <unknown>
E           #16 0x5561bd1c0336 <unknown>
E           #17 0x7fc09ce9caa4 <unknown>
E           #18 0x7fc09cf29c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:55:12,659 - INFO - Starting test with Chrome browser
2025-07-02 14:55:12,659 - INFO - ====== WebDriver manager ======
2025-07-02 14:55:12,765 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:12,798 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:12,832 - INFO - Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
2025-07-02 14:55:13,922 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x5561bd1c145a <unknown>
#1 0x5561bcc66760 <unknown>
#2 0x5561bcca10d8 <unknown>
#3 0x5561bcc9c2cf <unknown>
#4 0x5561bccec8d6 <unknown>
#5 0x5561bccebf96 <unknown>
#6 0x5561bccddc23 <unknown>
#7 0x5561bccaa4a5 <unknown>
#8 0x5561bccab111 <unknown>
#9 0x5561bd185f1b <unknown>
#10 0x5561bd189e19 <unknown>
#11 0x5561bd16cac9 <unknown>
#12 0x5561bd18a9c8 <unknown>
#13 0x5561bd15134f <unknown>
#14 0x5561bd1aea28 <unknown>
#15 0x5561bd1aec06 <unknown>
#16 0x5561bd1c0336 <unknown>
#17 0x7fc09ce9caa4 <unknown>
#18 0x7fc09cf29c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x5561bd1c145a <unknown>
#1 0x5561bcc66760 <unknown>
#2 0x5561bcca10d8 <unknown>
#3 0x5561bcc9c2cf <unknown>
#4 0x5561bccec8d6 <unknown>
#5 0x5561bccebf96 <unknown>
#6 0x5561bccddc23 <unknown>
#7 0x5561bccaa4a5 <unknown>
#8 0x5561bccab111 <unknown>
#9 0x5561bd185f1b <unknown>
#10 0x5561bd189e19 <unknown>
#11 0x5561bd16cac9 <unknown>
#12 0x5561bd18a9c8 <unknown>
#13 0x5561bd15134f <unknown>
#14 0x5561bd1aea28 <unknown>
#15 0x5561bd1aec06 <unknown>
#16 0x5561bd1c0336 <unknown>
#17 0x7fc09ce9caa4 <unknown>
#18 0x7fc09cf29c3c <unknown>
_ ERROR at setup of test_invalid_password_login[shubhamdabir07@gmail.com-Password] _

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f6d35040>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x55a93847e336 \\u003Cunknown>\\n#17 0x7f6da849caa4 \\u003Cunknown>\\n#18 0x7f6da8529c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x55a93847f45a <unknown>
E       #1 0x55a937f24760 <unknown>
E       #2 0x55a937f5f0d8 <unknown>
E       #3 0x55a937f5a2cf <unknown>
E       #4 0x55a937faa8d6 <unknown>
E       #5 0x55a937fa9f96 <unknown>
E       #6 0x55a937f9bc23 <unknown>
E       #7 0x55a937f684a5 <unknown>
E       #8 0x55a937f69111 <unknown>
E       #9 0x55a938443f1b <unknown>
E       #10 0x55a938447e19 <unknown>
E       #11 0x55a93842aac9 <unknown>
E       #12 0x55a9384489c8 <unknown>
E       #13 0x55a93840f34f <unknown>
E       #14 0x55a93846ca28 <unknown>
E       #15 0x55a93846cc06 <unknown>
E       #16 0x55a93847e336 <unknown>
E       #17 0x7f6da849caa4 <unknown>
E       #18 0x7f6da8529c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x55a93847f45a <unknown>
E           #1 0x55a937f24760 <unknown>
E           #2 0x55a937f5f0d8 <unknown>
E           #3 0x55a937f5a2cf <unknown>
E           #4 0x55a937faa8d6 <unknown>
E           #5 0x55a937fa9f96 <unknown>
E           #6 0x55a937f9bc23 <unknown>
E           #7 0x55a937f684a5 <unknown>
E           #8 0x55a937f69111 <unknown>
E           #9 0x55a938443f1b <unknown>
E           #10 0x55a938447e19 <unknown>
E           #11 0x55a93842aac9 <unknown>
E           #12 0x55a9384489c8 <unknown>
E           #13 0x55a93840f34f <unknown>
E           #14 0x55a93846ca28 <unknown>
E           #15 0x55a93846cc06 <unknown>
E           #16 0x55a93847e336 <unknown>
E           #17 0x7f6da849caa4 <unknown>
E           #18 0x7f6da8529c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:55:13,961 - INFO - Starting test with Chrome browser
2025-07-02 14:55:13,961 - INFO - ====== WebDriver manager ======
2025-07-02 14:55:14,067 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:14,099 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:14,130 - INFO - Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
2025-07-02 14:55:15,220 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x55a93847f45a <unknown>
#1 0x55a937f24760 <unknown>
#2 0x55a937f5f0d8 <unknown>
#3 0x55a937f5a2cf <unknown>
#4 0x55a937faa8d6 <unknown>
#5 0x55a937fa9f96 <unknown>
#6 0x55a937f9bc23 <unknown>
#7 0x55a937f684a5 <unknown>
#8 0x55a937f69111 <unknown>
#9 0x55a938443f1b <unknown>
#10 0x55a938447e19 <unknown>
#11 0x55a93842aac9 <unknown>
#12 0x55a9384489c8 <unknown>
#13 0x55a93840f34f <unknown>
#14 0x55a93846ca28 <unknown>
#15 0x55a93846cc06 <unknown>
#16 0x55a93847e336 <unknown>
#17 0x7f6da849caa4 <unknown>
#18 0x7f6da8529c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x55a93847f45a <unknown>
#1 0x55a937f24760 <unknown>
#2 0x55a937f5f0d8 <unknown>
#3 0x55a937f5a2cf <unknown>
#4 0x55a937faa8d6 <unknown>
#5 0x55a937fa9f96 <unknown>
#6 0x55a937f9bc23 <unknown>
#7 0x55a937f684a5 <unknown>
#8 0x55a937f69111 <unknown>
#9 0x55a938443f1b <unknown>
#10 0x55a938447e19 <unknown>
#11 0x55a93842aac9 <unknown>
#12 0x55a9384489c8 <unknown>
#13 0x55a93840f34f <unknown>
#14 0x55a93846ca28 <unknown>
#15 0x55a93846cc06 <unknown>
#16 0x55a93847e336 <unknown>
#17 0x7f6da849caa4 <unknown>
#18 0x7f6da8529c3c <unknown>
_ ERROR at setup of test_invalid_password_login[hrishikesh.shinde1607@gmail.com-payer@1234] _

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f5ec95e0>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x557227597336 \\u003Cunknown>\\n#17 0x7f7cb509caa4 \\u003Cunknown>\\n#18 0x7f7cb5129c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x55722759845a <unknown>
E       #1 0x55722703d760 <unknown>
E       #2 0x5572270780d8 <unknown>
E       #3 0x5572270732cf <unknown>
E       #4 0x5572270c38d6 <unknown>
E       #5 0x5572270c2f96 <unknown>
E       #6 0x5572270b4c23 <unknown>
E       #7 0x5572270814a5 <unknown>
E       #8 0x557227082111 <unknown>
E       #9 0x55722755cf1b <unknown>
E       #10 0x557227560e19 <unknown>
E       #11 0x557227543ac9 <unknown>
E       #12 0x5572275619c8 <unknown>
E       #13 0x55722752834f <unknown>
E       #14 0x557227585a28 <unknown>
E       #15 0x557227585c06 <unknown>
E       #16 0x557227597336 <unknown>
E       #17 0x7f7cb509caa4 <unknown>
E       #18 0x7f7cb5129c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x55722759845a <unknown>
E           #1 0x55722703d760 <unknown>
E           #2 0x5572270780d8 <unknown>
E           #3 0x5572270732cf <unknown>
E           #4 0x5572270c38d6 <unknown>
E           #5 0x5572270c2f96 <unknown>
E           #6 0x5572270b4c23 <unknown>
E           #7 0x5572270814a5 <unknown>
E           #8 0x557227082111 <unknown>
E           #9 0x55722755cf1b <unknown>
E           #10 0x557227560e19 <unknown>
E           #11 0x557227543ac9 <unknown>
E           #12 0x5572275619c8 <unknown>
E           #13 0x55722752834f <unknown>
E           #14 0x557227585a28 <unknown>
E           #15 0x557227585c06 <unknown>
E           #16 0x557227597336 <unknown>
E           #17 0x7f7cb509caa4 <unknown>
E           #18 0x7f7cb5129c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:55:15,258 - INFO - Starting test with Chrome browser
2025-07-02 14:55:15,258 - INFO - ====== WebDriver manager ======
2025-07-02 14:55:15,365 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:15,396 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:15,426 - INFO - Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
2025-07-02 14:55:16,516 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x55722759845a <unknown>
#1 0x55722703d760 <unknown>
#2 0x5572270780d8 <unknown>
#3 0x5572270732cf <unknown>
#4 0x5572270c38d6 <unknown>
#5 0x5572270c2f96 <unknown>
#6 0x5572270b4c23 <unknown>
#7 0x5572270814a5 <unknown>
#8 0x557227082111 <unknown>
#9 0x55722755cf1b <unknown>
#10 0x557227560e19 <unknown>
#11 0x557227543ac9 <unknown>
#12 0x5572275619c8 <unknown>
#13 0x55722752834f <unknown>
#14 0x557227585a28 <unknown>
#15 0x557227585c06 <unknown>
#16 0x557227597336 <unknown>
#17 0x7f7cb509caa4 <unknown>
#18 0x7f7cb5129c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x55722759845a <unknown>
#1 0x55722703d760 <unknown>
#2 0x5572270780d8 <unknown>
#3 0x5572270732cf <unknown>
#4 0x5572270c38d6 <unknown>
#5 0x5572270c2f96 <unknown>
#6 0x5572270b4c23 <unknown>
#7 0x5572270814a5 <unknown>
#8 0x557227082111 <unknown>
#9 0x55722755cf1b <unknown>
#10 0x557227560e19 <unknown>
#11 0x557227543ac9 <unknown>
#12 0x5572275619c8 <unknown>
#13 0x55722752834f <unknown>
#14 0x557227585a28 <unknown>
#15 0x557227585c06 <unknown>
#16 0x557227597336 <unknown>
#17 0x7f7cb509caa4 <unknown>
#18 0x7f7cb5129c3c <unknown>
_______________ ERROR at setup of test_blank_username_validation _______________

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f7b93230>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x5637e03b0336 \\u003Cunknown>\\n#17 0x7fc2ef89caa4 \\u003Cunknown>\\n#18 0x7fc2ef929c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x5637e03b145a <unknown>
E       #1 0x5637dfe56760 <unknown>
E       #2 0x5637dfe910d8 <unknown>
E       #3 0x5637dfe8c2cf <unknown>
E       #4 0x5637dfedc8d6 <unknown>
E       #5 0x5637dfedbf96 <unknown>
E       #6 0x5637dfecdc23 <unknown>
E       #7 0x5637dfe9a4a5 <unknown>
E       #8 0x5637dfe9b111 <unknown>
E       #9 0x5637e0375f1b <unknown>
E       #10 0x5637e0379e19 <unknown>
E       #11 0x5637e035cac9 <unknown>
E       #12 0x5637e037a9c8 <unknown>
E       #13 0x5637e034134f <unknown>
E       #14 0x5637e039ea28 <unknown>
E       #15 0x5637e039ec06 <unknown>
E       #16 0x5637e03b0336 <unknown>
E       #17 0x7fc2ef89caa4 <unknown>
E       #18 0x7fc2ef929c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x5637e03b145a <unknown>
E           #1 0x5637dfe56760 <unknown>
E           #2 0x5637dfe910d8 <unknown>
E           #3 0x5637dfe8c2cf <unknown>
E           #4 0x5637dfedc8d6 <unknown>
E           #5 0x5637dfedbf96 <unknown>
E           #6 0x5637dfecdc23 <unknown>
E           #7 0x5637dfe9a4a5 <unknown>
E           #8 0x5637dfe9b111 <unknown>
E           #9 0x5637e0375f1b <unknown>
E           #10 0x5637e0379e19 <unknown>
E           #11 0x5637e035cac9 <unknown>
E           #12 0x5637e037a9c8 <unknown>
E           #13 0x5637e034134f <unknown>
E           #14 0x5637e039ea28 <unknown>
E           #15 0x5637e039ec06 <unknown>
E           #16 0x5637e03b0336 <unknown>
E           #17 0x7fc2ef89caa4 <unknown>
E           #18 0x7fc2ef929c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:55:16,553 - INFO - Starting test with Chrome browser
2025-07-02 14:55:16,553 - INFO - ====== WebDriver manager ======
2025-07-02 14:55:16,661 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:16,692 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:16,722 - INFO - Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
2025-07-02 14:55:17,812 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x5637e03b145a <unknown>
#1 0x5637dfe56760 <unknown>
#2 0x5637dfe910d8 <unknown>
#3 0x5637dfe8c2cf <unknown>
#4 0x5637dfedc8d6 <unknown>
#5 0x5637dfedbf96 <unknown>
#6 0x5637dfecdc23 <unknown>
#7 0x5637dfe9a4a5 <unknown>
#8 0x5637dfe9b111 <unknown>
#9 0x5637e0375f1b <unknown>
#10 0x5637e0379e19 <unknown>
#11 0x5637e035cac9 <unknown>
#12 0x5637e037a9c8 <unknown>
#13 0x5637e034134f <unknown>
#14 0x5637e039ea28 <unknown>
#15 0x5637e039ec06 <unknown>
#16 0x5637e03b0336 <unknown>
#17 0x7fc2ef89caa4 <unknown>
#18 0x7fc2ef929c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x5637e03b145a <unknown>
#1 0x5637dfe56760 <unknown>
#2 0x5637dfe910d8 <unknown>
#3 0x5637dfe8c2cf <unknown>
#4 0x5637dfedc8d6 <unknown>
#5 0x5637dfedbf96 <unknown>
#6 0x5637dfecdc23 <unknown>
#7 0x5637dfe9a4a5 <unknown>
#8 0x5637dfe9b111 <unknown>
#9 0x5637e0375f1b <unknown>
#10 0x5637e0379e19 <unknown>
#11 0x5637e035cac9 <unknown>
#12 0x5637e037a9c8 <unknown>
#13 0x5637e034134f <unknown>
#14 0x5637e039ea28 <unknown>
#15 0x5637e039ec06 <unknown>
#16 0x5637e03b0336 <unknown>
#17 0x7fc2ef89caa4 <unknown>
#18 0x7fc2ef929c3c <unknown>
_______________ ERROR at setup of test_blank_password_validation _______________

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f5f09630>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x55a79eb3e336 \\u003Cunknown>\\n#17 0x7f7a57c9caa4 \\u003Cunknown>\\n#18 0x7f7a57d29c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x55a79eb3f45a <unknown>
E       #1 0x55a79e5e4760 <unknown>
E       #2 0x55a79e61f0d8 <unknown>
E       #3 0x55a79e61a2cf <unknown>
E       #4 0x55a79e66a8d6 <unknown>
E       #5 0x55a79e669f96 <unknown>
E       #6 0x55a79e65bc23 <unknown>
E       #7 0x55a79e6284a5 <unknown>
E       #8 0x55a79e629111 <unknown>
E       #9 0x55a79eb03f1b <unknown>
E       #10 0x55a79eb07e19 <unknown>
E       #11 0x55a79eaeaac9 <unknown>
E       #12 0x55a79eb089c8 <unknown>
E       #13 0x55a79eacf34f <unknown>
E       #14 0x55a79eb2ca28 <unknown>
E       #15 0x55a79eb2cc06 <unknown>
E       #16 0x55a79eb3e336 <unknown>
E       #17 0x7f7a57c9caa4 <unknown>
E       #18 0x7f7a57d29c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x55a79eb3f45a <unknown>
E           #1 0x55a79e5e4760 <unknown>
E           #2 0x55a79e61f0d8 <unknown>
E           #3 0x55a79e61a2cf <unknown>
E           #4 0x55a79e66a8d6 <unknown>
E           #5 0x55a79e669f96 <unknown>
E           #6 0x55a79e65bc23 <unknown>
E           #7 0x55a79e6284a5 <unknown>
E           #8 0x55a79e629111 <unknown>
E           #9 0x55a79eb03f1b <unknown>
E           #10 0x55a79eb07e19 <unknown>
E           #11 0x55a79eaeaac9 <unknown>
E           #12 0x55a79eb089c8 <unknown>
E           #13 0x55a79eacf34f <unknown>
E           #14 0x55a79eb2ca28 <unknown>
E           #15 0x55a79eb2cc06 <unknown>
E           #16 0x55a79eb3e336 <unknown>
E           #17 0x7f7a57c9caa4 <unknown>
E           #18 0x7f7a57d29c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:55:17,849 - INFO - Starting test with Chrome browser
2025-07-02 14:55:17,850 - INFO - ====== WebDriver manager ======
2025-07-02 14:55:17,956 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:17,988 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:18,019 - INFO - Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
2025-07-02 14:55:19,108 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x55a79eb3f45a <unknown>
#1 0x55a79e5e4760 <unknown>
#2 0x55a79e61f0d8 <unknown>
#3 0x55a79e61a2cf <unknown>
#4 0x55a79e66a8d6 <unknown>
#5 0x55a79e669f96 <unknown>
#6 0x55a79e65bc23 <unknown>
#7 0x55a79e6284a5 <unknown>
#8 0x55a79e629111 <unknown>
#9 0x55a79eb03f1b <unknown>
#10 0x55a79eb07e19 <unknown>
#11 0x55a79eaeaac9 <unknown>
#12 0x55a79eb089c8 <unknown>
#13 0x55a79eacf34f <unknown>
#14 0x55a79eb2ca28 <unknown>
#15 0x55a79eb2cc06 <unknown>
#16 0x55a79eb3e336 <unknown>
#17 0x7f7a57c9caa4 <unknown>
#18 0x7f7a57d29c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x55a79eb3f45a <unknown>
#1 0x55a79e5e4760 <unknown>
#2 0x55a79e61f0d8 <unknown>
#3 0x55a79e61a2cf <unknown>
#4 0x55a79e66a8d6 <unknown>
#5 0x55a79e669f96 <unknown>
#6 0x55a79e65bc23 <unknown>
#7 0x55a79e6284a5 <unknown>
#8 0x55a79e629111 <unknown>
#9 0x55a79eb03f1b <unknown>
#10 0x55a79eb07e19 <unknown>
#11 0x55a79eaeaac9 <unknown>
#12 0x55a79eb089c8 <unknown>
#13 0x55a79eacf34f <unknown>
#14 0x55a79eb2ca28 <unknown>
#15 0x55a79eb2cc06 <unknown>
#16 0x55a79eb3e336 <unknown>
#17 0x7f7a57c9caa4 <unknown>
#18 0x7f7a57d29c3c <unknown>
__________ ERROR at setup of test_invalid_email_validation[username0] __________

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f5ecd090>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x558d03d70336 \\u003Cunknown>\\n#17 0x7f95c509caa4 \\u003Cunknown>\\n#18 0x7f95c5129c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x558d03d7145a <unknown>
E       #1 0x558d03816760 <unknown>
E       #2 0x558d038510d8 <unknown>
E       #3 0x558d0384c2cf <unknown>
E       #4 0x558d0389c8d6 <unknown>
E       #5 0x558d0389bf96 <unknown>
E       #6 0x558d0388dc23 <unknown>
E       #7 0x558d0385a4a5 <unknown>
E       #8 0x558d0385b111 <unknown>
E       #9 0x558d03d35f1b <unknown>
E       #10 0x558d03d39e19 <unknown>
E       #11 0x558d03d1cac9 <unknown>
E       #12 0x558d03d3a9c8 <unknown>
E       #13 0x558d03d0134f <unknown>
E       #14 0x558d03d5ea28 <unknown>
E       #15 0x558d03d5ec06 <unknown>
E       #16 0x558d03d70336 <unknown>
E       #17 0x7f95c509caa4 <unknown>
E       #18 0x7f95c5129c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x558d03d7145a <unknown>
E           #1 0x558d03816760 <unknown>
E           #2 0x558d038510d8 <unknown>
E           #3 0x558d0384c2cf <unknown>
E           #4 0x558d0389c8d6 <unknown>
E           #5 0x558d0389bf96 <unknown>
E           #6 0x558d0388dc23 <unknown>
E           #7 0x558d0385a4a5 <unknown>
E           #8 0x558d0385b111 <unknown>
E           #9 0x558d03d35f1b <unknown>
E           #10 0x558d03d39e19 <unknown>
E           #11 0x558d03d1cac9 <unknown>
E           #12 0x558d03d3a9c8 <unknown>
E           #13 0x558d03d0134f <unknown>
E           #14 0x558d03d5ea28 <unknown>
E           #15 0x558d03d5ec06 <unknown>
E           #16 0x558d03d70336 <unknown>
E           #17 0x7f95c509caa4 <unknown>
E           #18 0x7f95c5129c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:55:19,147 - INFO - Starting test with Chrome browser
2025-07-02 14:55:19,148 - INFO - ====== WebDriver manager ======
2025-07-02 14:55:19,254 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:19,286 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:19,318 - INFO - Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
2025-07-02 14:55:20,407 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x558d03d7145a <unknown>
#1 0x558d03816760 <unknown>
#2 0x558d038510d8 <unknown>
#3 0x558d0384c2cf <unknown>
#4 0x558d0389c8d6 <unknown>
#5 0x558d0389bf96 <unknown>
#6 0x558d0388dc23 <unknown>
#7 0x558d0385a4a5 <unknown>
#8 0x558d0385b111 <unknown>
#9 0x558d03d35f1b <unknown>
#10 0x558d03d39e19 <unknown>
#11 0x558d03d1cac9 <unknown>
#12 0x558d03d3a9c8 <unknown>
#13 0x558d03d0134f <unknown>
#14 0x558d03d5ea28 <unknown>
#15 0x558d03d5ec06 <unknown>
#16 0x558d03d70336 <unknown>
#17 0x7f95c509caa4 <unknown>
#18 0x7f95c5129c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x558d03d7145a <unknown>
#1 0x558d03816760 <unknown>
#2 0x558d038510d8 <unknown>
#3 0x558d0384c2cf <unknown>
#4 0x558d0389c8d6 <unknown>
#5 0x558d0389bf96 <unknown>
#6 0x558d0388dc23 <unknown>
#7 0x558d0385a4a5 <unknown>
#8 0x558d0385b111 <unknown>
#9 0x558d03d35f1b <unknown>
#10 0x558d03d39e19 <unknown>
#11 0x558d03d1cac9 <unknown>
#12 0x558d03d3a9c8 <unknown>
#13 0x558d03d0134f <unknown>
#14 0x558d03d5ea28 <unknown>
#15 0x558d03d5ec06 <unknown>
#16 0x558d03d70336 <unknown>
#17 0x7f95c509caa4 <unknown>
#18 0x7f95c5129c3c <unknown>
__________ ERROR at setup of test_invalid_email_validation[username1] __________

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f6d73290>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x564fd9112336 \\u003Cunknown>\\n#17 0x7fc5ea69caa4 \\u003Cunknown>\\n#18 0x7fc5ea729c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x564fd911345a <unknown>
E       #1 0x564fd8bb8760 <unknown>
E       #2 0x564fd8bf30d8 <unknown>
E       #3 0x564fd8bee2cf <unknown>
E       #4 0x564fd8c3e8d6 <unknown>
E       #5 0x564fd8c3df96 <unknown>
E       #6 0x564fd8c2fc23 <unknown>
E       #7 0x564fd8bfc4a5 <unknown>
E       #8 0x564fd8bfd111 <unknown>
E       #9 0x564fd90d7f1b <unknown>
E       #10 0x564fd90dbe19 <unknown>
E       #11 0x564fd90beac9 <unknown>
E       #12 0x564fd90dc9c8 <unknown>
E       #13 0x564fd90a334f <unknown>
E       #14 0x564fd9100a28 <unknown>
E       #15 0x564fd9100c06 <unknown>
E       #16 0x564fd9112336 <unknown>
E       #17 0x7fc5ea69caa4 <unknown>
E       #18 0x7fc5ea729c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x564fd911345a <unknown>
E           #1 0x564fd8bb8760 <unknown>
E           #2 0x564fd8bf30d8 <unknown>
E           #3 0x564fd8bee2cf <unknown>
E           #4 0x564fd8c3e8d6 <unknown>
E           #5 0x564fd8c3df96 <unknown>
E           #6 0x564fd8c2fc23 <unknown>
E           #7 0x564fd8bfc4a5 <unknown>
E           #8 0x564fd8bfd111 <unknown>
E           #9 0x564fd90d7f1b <unknown>
E           #10 0x564fd90dbe19 <unknown>
E           #11 0x564fd90beac9 <unknown>
E           #12 0x564fd90dc9c8 <unknown>
E           #13 0x564fd90a334f <unknown>
E           #14 0x564fd9100a28 <unknown>
E           #15 0x564fd9100c06 <unknown>
E           #16 0x564fd9112336 <unknown>
E           #17 0x7fc5ea69caa4 <unknown>
E           #18 0x7fc5ea729c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:55:20,445 - INFO - Starting test with Chrome browser
2025-07-02 14:55:20,445 - INFO - ====== WebDriver manager ======
2025-07-02 14:55:20,552 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:20,583 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:20,614 - INFO - Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
2025-07-02 14:55:21,705 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x564fd911345a <unknown>
#1 0x564fd8bb8760 <unknown>
#2 0x564fd8bf30d8 <unknown>
#3 0x564fd8bee2cf <unknown>
#4 0x564fd8c3e8d6 <unknown>
#5 0x564fd8c3df96 <unknown>
#6 0x564fd8c2fc23 <unknown>
#7 0x564fd8bfc4a5 <unknown>
#8 0x564fd8bfd111 <unknown>
#9 0x564fd90d7f1b <unknown>
#10 0x564fd90dbe19 <unknown>
#11 0x564fd90beac9 <unknown>
#12 0x564fd90dc9c8 <unknown>
#13 0x564fd90a334f <unknown>
#14 0x564fd9100a28 <unknown>
#15 0x564fd9100c06 <unknown>
#16 0x564fd9112336 <unknown>
#17 0x7fc5ea69caa4 <unknown>
#18 0x7fc5ea729c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x564fd911345a <unknown>
#1 0x564fd8bb8760 <unknown>
#2 0x564fd8bf30d8 <unknown>
#3 0x564fd8bee2cf <unknown>
#4 0x564fd8c3e8d6 <unknown>
#5 0x564fd8c3df96 <unknown>
#6 0x564fd8c2fc23 <unknown>
#7 0x564fd8bfc4a5 <unknown>
#8 0x564fd8bfd111 <unknown>
#9 0x564fd90d7f1b <unknown>
#10 0x564fd90dbe19 <unknown>
#11 0x564fd90beac9 <unknown>
#12 0x564fd90dc9c8 <unknown>
#13 0x564fd90a334f <unknown>
#14 0x564fd9100a28 <unknown>
#15 0x564fd9100c06 <unknown>
#16 0x564fd9112336 <unknown>
#17 0x7fc5ea69caa4 <unknown>
#18 0x7fc5ea729c3c <unknown>
__________ ERROR at setup of test_invalid_email_validation[username2] __________

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f6d73d10>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x562b25aae336 \\u003Cunknown>\\n#17 0x7f39a2e9caa4 \\u003Cunknown>\\n#18 0x7f39a2f29c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x562b25aaf45a <unknown>
E       #1 0x562b25554760 <unknown>
E       #2 0x562b2558f0d8 <unknown>
E       #3 0x562b2558a2cf <unknown>
E       #4 0x562b255da8d6 <unknown>
E       #5 0x562b255d9f96 <unknown>
E       #6 0x562b255cbc23 <unknown>
E       #7 0x562b255984a5 <unknown>
E       #8 0x562b25599111 <unknown>
E       #9 0x562b25a73f1b <unknown>
E       #10 0x562b25a77e19 <unknown>
E       #11 0x562b25a5aac9 <unknown>
E       #12 0x562b25a789c8 <unknown>
E       #13 0x562b25a3f34f <unknown>
E       #14 0x562b25a9ca28 <unknown>
E       #15 0x562b25a9cc06 <unknown>
E       #16 0x562b25aae336 <unknown>
E       #17 0x7f39a2e9caa4 <unknown>
E       #18 0x7f39a2f29c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x562b25aaf45a <unknown>
E           #1 0x562b25554760 <unknown>
E           #2 0x562b2558f0d8 <unknown>
E           #3 0x562b2558a2cf <unknown>
E           #4 0x562b255da8d6 <unknown>
E           #5 0x562b255d9f96 <unknown>
E           #6 0x562b255cbc23 <unknown>
E           #7 0x562b255984a5 <unknown>
E           #8 0x562b25599111 <unknown>
E           #9 0x562b25a73f1b <unknown>
E           #10 0x562b25a77e19 <unknown>
E           #11 0x562b25a5aac9 <unknown>
E           #12 0x562b25a789c8 <unknown>
E           #13 0x562b25a3f34f <unknown>
E           #14 0x562b25a9ca28 <unknown>
E           #15 0x562b25a9cc06 <unknown>
E           #16 0x562b25aae336 <unknown>
E           #17 0x7f39a2e9caa4 <unknown>
E           #18 0x7f39a2f29c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:55:21,743 - INFO - Starting test with Chrome browser
2025-07-02 14:55:21,743 - INFO - ====== WebDriver manager ======
2025-07-02 14:55:21,850 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:21,882 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:21,915 - INFO - Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
2025-07-02 14:55:23,005 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x562b25aaf45a <unknown>
#1 0x562b25554760 <unknown>
#2 0x562b2558f0d8 <unknown>
#3 0x562b2558a2cf <unknown>
#4 0x562b255da8d6 <unknown>
#5 0x562b255d9f96 <unknown>
#6 0x562b255cbc23 <unknown>
#7 0x562b255984a5 <unknown>
#8 0x562b25599111 <unknown>
#9 0x562b25a73f1b <unknown>
#10 0x562b25a77e19 <unknown>
#11 0x562b25a5aac9 <unknown>
#12 0x562b25a789c8 <unknown>
#13 0x562b25a3f34f <unknown>
#14 0x562b25a9ca28 <unknown>
#15 0x562b25a9cc06 <unknown>
#16 0x562b25aae336 <unknown>
#17 0x7f39a2e9caa4 <unknown>
#18 0x7f39a2f29c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x562b25aaf45a <unknown>
#1 0x562b25554760 <unknown>
#2 0x562b2558f0d8 <unknown>
#3 0x562b2558a2cf <unknown>
#4 0x562b255da8d6 <unknown>
#5 0x562b255d9f96 <unknown>
#6 0x562b255cbc23 <unknown>
#7 0x562b255984a5 <unknown>
#8 0x562b25599111 <unknown>
#9 0x562b25a73f1b <unknown>
#10 0x562b25a77e19 <unknown>
#11 0x562b25a5aac9 <unknown>
#12 0x562b25a789c8 <unknown>
#13 0x562b25a3f34f <unknown>
#14 0x562b25a9ca28 <unknown>
#15 0x562b25a9cc06 <unknown>
#16 0x562b25aae336 <unknown>
#17 0x7f39a2e9caa4 <unknown>
#18 0x7f39a2f29c3c <unknown>
__________ ERROR at setup of test_invalid_email_validation[username3] __________

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f6d0b5f0>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x5655085f1336 \\u003Cunknown>\\n#17 0x7fb99aa9caa4 \\u003Cunknown>\\n#18 0x7fb99ab29c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x5655085f245a <unknown>
E       #1 0x565508097760 <unknown>
E       #2 0x5655080d20d8 <unknown>
E       #3 0x5655080cd2cf <unknown>
E       #4 0x56550811d8d6 <unknown>
E       #5 0x56550811cf96 <unknown>
E       #6 0x56550810ec23 <unknown>
E       #7 0x5655080db4a5 <unknown>
E       #8 0x5655080dc111 <unknown>
E       #9 0x5655085b6f1b <unknown>
E       #10 0x5655085bae19 <unknown>
E       #11 0x56550859dac9 <unknown>
E       #12 0x5655085bb9c8 <unknown>
E       #13 0x56550858234f <unknown>
E       #14 0x5655085dfa28 <unknown>
E       #15 0x5655085dfc06 <unknown>
E       #16 0x5655085f1336 <unknown>
E       #17 0x7fb99aa9caa4 <unknown>
E       #18 0x7fb99ab29c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x5655085f245a <unknown>
E           #1 0x565508097760 <unknown>
E           #2 0x5655080d20d8 <unknown>
E           #3 0x5655080cd2cf <unknown>
E           #4 0x56550811d8d6 <unknown>
E           #5 0x56550811cf96 <unknown>
E           #6 0x56550810ec23 <unknown>
E           #7 0x5655080db4a5 <unknown>
E           #8 0x5655080dc111 <unknown>
E           #9 0x5655085b6f1b <unknown>
E           #10 0x5655085bae19 <unknown>
E           #11 0x56550859dac9 <unknown>
E           #12 0x5655085bb9c8 <unknown>
E           #13 0x56550858234f <unknown>
E           #14 0x5655085dfa28 <unknown>
E           #15 0x5655085dfc06 <unknown>
E           #16 0x5655085f1336 <unknown>
E           #17 0x7fb99aa9caa4 <unknown>
E           #18 0x7fb99ab29c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:55:23,042 - INFO - Starting test with Chrome browser
2025-07-02 14:55:23,043 - INFO - ====== WebDriver manager ======
2025-07-02 14:55:23,150 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:23,182 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:23,217 - INFO - Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
2025-07-02 14:55:24,306 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x5655085f245a <unknown>
#1 0x565508097760 <unknown>
#2 0x5655080d20d8 <unknown>
#3 0x5655080cd2cf <unknown>
#4 0x56550811d8d6 <unknown>
#5 0x56550811cf96 <unknown>
#6 0x56550810ec23 <unknown>
#7 0x5655080db4a5 <unknown>
#8 0x5655080dc111 <unknown>
#9 0x5655085b6f1b <unknown>
#10 0x5655085bae19 <unknown>
#11 0x56550859dac9 <unknown>
#12 0x5655085bb9c8 <unknown>
#13 0x56550858234f <unknown>
#14 0x5655085dfa28 <unknown>
#15 0x5655085dfc06 <unknown>
#16 0x5655085f1336 <unknown>
#17 0x7fb99aa9caa4 <unknown>
#18 0x7fb99ab29c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x5655085f245a <unknown>
#1 0x565508097760 <unknown>
#2 0x5655080d20d8 <unknown>
#3 0x5655080cd2cf <unknown>
#4 0x56550811d8d6 <unknown>
#5 0x56550811cf96 <unknown>
#6 0x56550810ec23 <unknown>
#7 0x5655080db4a5 <unknown>
#8 0x5655080dc111 <unknown>
#9 0x5655085b6f1b <unknown>
#10 0x5655085bae19 <unknown>
#11 0x56550859dac9 <unknown>
#12 0x5655085bb9c8 <unknown>
#13 0x56550858234f <unknown>
#14 0x5655085dfa28 <unknown>
#15 0x5655085dfc06 <unknown>
#16 0x5655085f1336 <unknown>
#17 0x7fb99aa9caa4 <unknown>
#18 0x7fb99ab29c3c <unknown>
__________ ERROR at setup of test_invalid_email_validation[username4] __________

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
>               driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)

conftest.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chrome/webdriver.py:45: in __init__
    super().__init__(
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/chromium/webdriver.py:66: in __init__
    super().__init__(command_executor=executor, options=options)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:250: in __init__
    self.start_session(capabilities)
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:342: in start_session
    response = self.execute(Command.NEW_SESSION, caps)["value"]
/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/webdriver.py:429: in execute
    self.error_handler.check_response(response)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7fc0f6d0a150>
response = {'status': 500, 'value': '{"value":{"error":"session not created","message":"session not created: probably user data d...\\n#16 0x5617981b8336 \\u003Cunknown>\\n#17 0x7fe00de9caa4 \\u003Cunknown>\\n#18 0x7fe00df29c3c \\u003Cunknown>\\n"}}'}

    def check_response(self, response: Dict[str, Any]) -> None:
        """Checks that a JSON response from the WebDriver does not have an
        error.
    
        :Args:
         - response - The JSON response from the WebDriver server as a dictionary
           object.
    
        :Raises: If the response contains an error message.
        """
        status = response.get("status", None)
        if not status or status == ErrorCode.SUCCESS:
            return
        value = None
        message = response.get("message", "")
        screen: str = response.get("screen", "")
        stacktrace = None
        if isinstance(status, int):
            value_json = response.get("value", None)
            if value_json and isinstance(value_json, str):
                import json
    
                try:
                    value = json.loads(value_json)
                    if len(value) == 1:
                        value = value["value"]
                    status = value.get("error", None)
                    if not status:
                        status = value.get("status", ErrorCode.UNKNOWN_ERROR)
                        message = value.get("value") or value.get("message")
                        if not isinstance(message, str):
                            value = message
                            message = message.get("message")
                    else:
                        message = value.get("message", None)
                except ValueError:
                    pass
    
        exception_class: Type[WebDriverException]
        e = ErrorCode()
        error_codes = [item for item in dir(e) if not item.startswith("__")]
        for error_code in error_codes:
            error_info = getattr(ErrorCode, error_code)
            if isinstance(error_info, list) and status in error_info:
                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)
                break
        else:
            exception_class = WebDriverException
    
        if not value:
            value = response["value"]
        if isinstance(value, str):
            raise exception_class(value)
        if message == "" and "message" in value:
            message = value["message"]
    
        screen = None  # type: ignore[assignment]
        if "screen" in value:
            screen = value["screen"]
    
        stacktrace = None
        st_value = value.get("stackTrace") or value.get("stacktrace")
        if st_value:
            if isinstance(st_value, str):
                stacktrace = st_value.split("\n")
            else:
                stacktrace = []
                try:
                    for frame in st_value:
                        line = frame.get("lineNumber", "")
                        file = frame.get("fileName", "<anonymous>")
                        if line:
                            file = f"{file}:{line}"
                        meth = frame.get("methodName", "<anonymous>")
                        if "className" in frame:
                            meth = f"{frame['className']}.{meth}"
                        msg = "    at %s (%s)"
                        msg = msg % (meth, file)
                        stacktrace.append(msg)
                except TypeError:
                    pass
        if exception_class == UnexpectedAlertPresentException:
            alert_text = None
            if "data" in value:
                alert_text = value["data"].get("text")
            elif "alert" in value:
                alert_text = value["alert"].get("text")
            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here
>       raise exception_class(message, screen, stacktrace)
E       selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E       Stacktrace:
E       #0 0x5617981b945a <unknown>
E       #1 0x561797c5e760 <unknown>
E       #2 0x561797c990d8 <unknown>
E       #3 0x561797c942cf <unknown>
E       #4 0x561797ce48d6 <unknown>
E       #5 0x561797ce3f96 <unknown>
E       #6 0x561797cd5c23 <unknown>
E       #7 0x561797ca24a5 <unknown>
E       #8 0x561797ca3111 <unknown>
E       #9 0x56179817df1b <unknown>
E       #10 0x561798181e19 <unknown>
E       #11 0x561798164ac9 <unknown>
E       #12 0x5617981829c8 <unknown>
E       #13 0x56179814934f <unknown>
E       #14 0x5617981a6a28 <unknown>
E       #15 0x5617981a6c06 <unknown>
E       #16 0x5617981b8336 <unknown>
E       #17 0x7fe00de9caa4 <unknown>
E       #18 0x7fe00df29c3c <unknown>

/opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/selenium/webdriver/remote/errorhandler.py:232: SessionNotCreatedException

During handling of the above exception, another exception occurred:

    @pytest.fixture(scope="function")
    def setup():
        browser = BROWSER.lower()
        driver = None
        logger.info(f"Starting test with {browser.capitalize()} browser")
    
        try:
            if browser == "chrome":
                options = ChromeOptions()
                options.add_argument("--disable-gpu")
                options.add_argument("--no-sandbox")
                options.add_argument("--disable-dev-shm-usage")
                options.add_argument("--force-device-scale-factor=0.85")
                #options.add_argument("--headless=new")
                options.add_argument("--disable-extensions")
                options.add_argument("--remote-debugging-port=9222")
                options.add_experimental_option("excludeSwitches", ["enable-logging"])
                options.set_capability("unhandledPromptBehavior", "accept")
                #options.add_argument(f"--user-data-dir={mkdtemp()}")
                driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)
            elif browser == "firefox":
                options = FirefoxOptions()
                driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)
            elif browser == "edge":
                options = EdgeOptions()
                driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)
            else:
                raise ValueError(f"Unsupported browser: {browser}")
    
            driver.maximize_window()
            driver.implicitly_wait(30)
            driver.get(URL)
            logger.info(f"Navigated to URL: {URL}")
    
            if ENABLE_LOGIN:
                login(driver)
    
            yield driver
    
        except Exception as e:
            logger.error(f"Driver setup failed: {e}")
>           pytest.fail(f"Driver setup failed: {e}")
E           Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
E           Stacktrace:
E           #0 0x5617981b945a <unknown>
E           #1 0x561797c5e760 <unknown>
E           #2 0x561797c990d8 <unknown>
E           #3 0x561797c942cf <unknown>
E           #4 0x561797ce48d6 <unknown>
E           #5 0x561797ce3f96 <unknown>
E           #6 0x561797cd5c23 <unknown>
E           #7 0x561797ca24a5 <unknown>
E           #8 0x561797ca3111 <unknown>
E           #9 0x56179817df1b <unknown>
E           #10 0x561798181e19 <unknown>
E           #11 0x561798164ac9 <unknown>
E           #12 0x5617981829c8 <unknown>
E           #13 0x56179814934f <unknown>
E           #14 0x5617981a6a28 <unknown>
E           #15 0x5617981a6c06 <unknown>
E           #16 0x5617981b8336 <unknown>
E           #17 0x7fe00de9caa4 <unknown>
E           #18 0x7fe00df29c3c <unknown>

conftest.py:127: Failed
---------------------------- Captured stderr setup -----------------------------
2025-07-02 14:55:24,345 - INFO - Starting test with Chrome browser
2025-07-02 14:55:24,345 - INFO - ====== WebDriver manager ======
2025-07-02 14:55:24,452 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:24,483 - INFO - Get LATEST chromedriver version for google-chrome
2025-07-02 14:55:24,514 - INFO - Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
2025-07-02 14:55:25,604 - ERROR - Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x5617981b945a <unknown>
#1 0x561797c5e760 <unknown>
#2 0x561797c990d8 <unknown>
#3 0x561797c942cf <unknown>
#4 0x561797ce48d6 <unknown>
#5 0x561797ce3f96 <unknown>
#6 0x561797cd5c23 <unknown>
#7 0x561797ca24a5 <unknown>
#8 0x561797ca3111 <unknown>
#9 0x56179817df1b <unknown>
#10 0x561798181e19 <unknown>
#11 0x561798164ac9 <unknown>
#12 0x5617981829c8 <unknown>
#13 0x56179814934f <unknown>
#14 0x5617981a6a28 <unknown>
#15 0x5617981a6c06 <unknown>
#16 0x5617981b8336 <unknown>
#17 0x7fe00de9caa4 <unknown>
#18 0x7fe00df29c3c <unknown>

------------------------------ Captured log setup ------------------------------
INFO     conftest:conftest.py:90 Starting test with Chrome browser
INFO     WDM:logger.py:11 ====== WebDriver manager ======
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Get LATEST chromedriver version for google-chrome
INFO     WDM:logger.py:11 Driver [/home/runner/.wdm/drivers/chromedriver/linux64/137.0.7151.119/chromedriver-linux64/chromedriver] found in cache
ERROR    conftest:conftest.py:126 Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x5617981b945a <unknown>
#1 0x561797c5e760 <unknown>
#2 0x561797c990d8 <unknown>
#3 0x561797c942cf <unknown>
#4 0x561797ce48d6 <unknown>
#5 0x561797ce3f96 <unknown>
#6 0x561797cd5c23 <unknown>
#7 0x561797ca24a5 <unknown>
#8 0x561797ca3111 <unknown>
#9 0x56179817df1b <unknown>
#10 0x561798181e19 <unknown>
#11 0x561798164ac9 <unknown>
#12 0x5617981829c8 <unknown>
#13 0x56179814934f <unknown>
#14 0x5617981a6a28 <unknown>
#15 0x5617981a6c06 <unknown>
#16 0x5617981b8336 <unknown>
#17 0x7fe00de9caa4 <unknown>
#18 0x7fe00df29c3c <unknown>
- Generated html report: file:///home/runner/work/Mocha_accounting/Mocha_accounting/C%3A%5CUsers%5CTaurus13%5CPycharmProjects%5CPythonProject%5Creports/20250702_145458/report.html -
=========================== short test summary info ============================
ERROR tests/test_login.py::test_valid_login[ranjeet.gupta@mochatechnologies.com-Ais@1234] - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x555fb586c45a <unknown>
#1 0x555fb5311760 <unknown>
#2 0x555fb534c0d8 <unknown>
#3 0x555fb53472cf <unknown>
#4 0x555fb53978d6 <unknown>
#5 0x555fb5396f96 <unknown>
#6 0x555fb5388c23 <unknown>
#7 0x555fb53554a5 <unknown>
#8 0x555fb5356111 <unknown>
#9 0x555fb5830f1b <unknown>
#10 0x555fb5834e19 <unknown>
#11 0x555fb5817ac9 <unknown>
#12 0x555fb58359c8 <unknown>
#13 0x555fb57fc34f <unknown>
#14 0x555fb5859a28 <unknown>
#15 0x555fb5859c06 <unknown>
#16 0x555fb586b336 <unknown>
#17 0x7f588a49caa4 <unknown>
#18 0x7f588a529c3c <unknown>
ERROR tests/test_login.py::test_valid_login[samatakamble9@gmail.com-Samata@16] - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x55d375c1845a <unknown>
#1 0x55d3756bd760 <unknown>
#2 0x55d3756f80d8 <unknown>
#3 0x55d3756f32cf <unknown>
#4 0x55d3757438d6 <unknown>
#5 0x55d375742f96 <unknown>
#6 0x55d375734c23 <unknown>
#7 0x55d3757014a5 <unknown>
#8 0x55d375702111 <unknown>
#9 0x55d375bdcf1b <unknown>
#10 0x55d375be0e19 <unknown>
#11 0x55d375bc3ac9 <unknown>
#12 0x55d375be19c8 <unknown>
#13 0x55d375ba834f <unknown>
#14 0x55d375c05a28 <unknown>
#15 0x55d375c05c06 <unknown>
#16 0x55d375c17336 <unknown>
#17 0x7fae31a9caa4 <unknown>
#18 0x7fae31b29c3c <unknown>
ERROR tests/test_login.py::test_valid_login[shubhamdabir07@gmail.com-Shubham@1234] - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x55d0048ea45a <unknown>
#1 0x55d00438f760 <unknown>
#2 0x55d0043ca0d8 <unknown>
#3 0x55d0043c52cf <unknown>
#4 0x55d0044158d6 <unknown>
#5 0x55d004414f96 <unknown>
#6 0x55d004406c23 <unknown>
#7 0x55d0043d34a5 <unknown>
#8 0x55d0043d4111 <unknown>
#9 0x55d0048aef1b <unknown>
#10 0x55d0048b2e19 <unknown>
#11 0x55d004895ac9 <unknown>
#12 0x55d0048b39c8 <unknown>
#13 0x55d00487a34f <unknown>
#14 0x55d0048d7a28 <unknown>
#15 0x55d0048d7c06 <unknown>
#16 0x55d0048e9336 <unknown>
#17 0x7f71dc49caa4 <unknown>
#18 0x7f71dc529c3c <unknown>
ERROR tests/test_login.py::test_valid_login[hrishikesh.shinde1607@gmail.com-Hrishikesh@1234] - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x56459106a45a <unknown>
#1 0x564590b0f760 <unknown>
#2 0x564590b4a0d8 <unknown>
#3 0x564590b452cf <unknown>
#4 0x564590b958d6 <unknown>
#5 0x564590b94f96 <unknown>
#6 0x564590b86c23 <unknown>
#7 0x564590b534a5 <unknown>
#8 0x564590b54111 <unknown>
#9 0x56459102ef1b <unknown>
#10 0x564591032e19 <unknown>
#11 0x564591015ac9 <unknown>
#12 0x5645910339c8 <unknown>
#13 0x564590ffa34f <unknown>
#14 0x564591057a28 <unknown>
#15 0x564591057c06 <unknown>
#16 0x564591069336 <unknown>
#17 0x7f6a8ec9caa4 <unknown>
#18 0x7f6a8ed29c3c <unknown>
ERROR tests/test_login.py::test_invalid_email_login[username0] - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x562df1ad645a <unknown>
#1 0x562df157b760 <unknown>
#2 0x562df15b60d8 <unknown>
#3 0x562df15b12cf <unknown>
#4 0x562df16018d6 <unknown>
#5 0x562df1600f96 <unknown>
#6 0x562df15f2c23 <unknown>
#7 0x562df15bf4a5 <unknown>
#8 0x562df15c0111 <unknown>
#9 0x562df1a9af1b <unknown>
#10 0x562df1a9ee19 <unknown>
#11 0x562df1a81ac9 <unknown>
#12 0x562df1a9f9c8 <unknown>
#13 0x562df1a6634f <unknown>
#14 0x562df1ac3a28 <unknown>
#15 0x562df1ac3c06 <unknown>
#16 0x562df1ad5336 <unknown>
#17 0x7fa19aa9caa4 <unknown>
#18 0x7fa19ab29c3c <unknown>
ERROR tests/test_login.py::test_invalid_email_login[username1] - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x555f7572d45a <unknown>
#1 0x555f751d2760 <unknown>
#2 0x555f7520d0d8 <unknown>
#3 0x555f752082cf <unknown>
#4 0x555f752588d6 <unknown>
#5 0x555f75257f96 <unknown>
#6 0x555f75249c23 <unknown>
#7 0x555f752164a5 <unknown>
#8 0x555f75217111 <unknown>
#9 0x555f756f1f1b <unknown>
#10 0x555f756f5e19 <unknown>
#11 0x555f756d8ac9 <unknown>
#12 0x555f756f69c8 <unknown>
#13 0x555f756bd34f <unknown>
#14 0x555f7571aa28 <unknown>
#15 0x555f7571ac06 <unknown>
#16 0x555f7572c336 <unknown>
#17 0x7f6fd889caa4 <unknown>
#18 0x7f6fd8929c3c <unknown>
ERROR tests/test_login.py::test_invalid_email_login[username2] - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x563f131bb45a <unknown>
#1 0x563f12c60760 <unknown>
#2 0x563f12c9b0d8 <unknown>
#3 0x563f12c962cf <unknown>
#4 0x563f12ce68d6 <unknown>
#5 0x563f12ce5f96 <unknown>
#6 0x563f12cd7c23 <unknown>
#7 0x563f12ca44a5 <unknown>
#8 0x563f12ca5111 <unknown>
#9 0x563f1317ff1b <unknown>
#10 0x563f13183e19 <unknown>
#11 0x563f13166ac9 <unknown>
#12 0x563f131849c8 <unknown>
#13 0x563f1314b34f <unknown>
#14 0x563f131a8a28 <unknown>
#15 0x563f131a8c06 <unknown>
#16 0x563f131ba336 <unknown>
#17 0x7fc6e0c9caa4 <unknown>
#18 0x7fc6e0d29c3c <unknown>
ERROR tests/test_login.py::test_invalid_email_login[username3] - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x55cae05dd45a <unknown>
#1 0x55cae0082760 <unknown>
#2 0x55cae00bd0d8 <unknown>
#3 0x55cae00b82cf <unknown>
#4 0x55cae01088d6 <unknown>
#5 0x55cae0107f96 <unknown>
#6 0x55cae00f9c23 <unknown>
#7 0x55cae00c64a5 <unknown>
#8 0x55cae00c7111 <unknown>
#9 0x55cae05a1f1b <unknown>
#10 0x55cae05a5e19 <unknown>
#11 0x55cae0588ac9 <unknown>
#12 0x55cae05a69c8 <unknown>
#13 0x55cae056d34f <unknown>
#14 0x55cae05caa28 <unknown>
#15 0x55cae05cac06 <unknown>
#16 0x55cae05dc336 <unknown>
#17 0x7fa20f69caa4 <unknown>
#18 0x7fa20f729c3c <unknown>
ERROR tests/test_login.py::test_invalid_password_login[ranjeet.gupta@mochatechnologies.com-Password@123] - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x56497539345a <unknown>
#1 0x564974e38760 <unknown>
#2 0x564974e730d8 <unknown>
#3 0x564974e6e2cf <unknown>
#4 0x564974ebe8d6 <unknown>
#5 0x564974ebdf96 <unknown>
#6 0x564974eafc23 <unknown>
#7 0x564974e7c4a5 <unknown>
#8 0x564974e7d111 <unknown>
#9 0x564975357f1b <unknown>
#10 0x56497535be19 <unknown>
#11 0x56497533eac9 <unknown>
#12 0x56497535c9c8 <unknown>
#13 0x56497532334f <unknown>
#14 0x564975380a28 <unknown>
#15 0x564975380c06 <unknown>
#16 0x564975392336 <unknown>
#17 0x7f26d529caa4 <unknown>
#18 0x7f26d5329c3c <unknown>
ERROR tests/test_login.py::test_invalid_password_login[samatakamble9@gmail.com-Password@12] - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x5561bd1c145a <unknown>
#1 0x5561bcc66760 <unknown>
#2 0x5561bcca10d8 <unknown>
#3 0x5561bcc9c2cf <unknown>
#4 0x5561bccec8d6 <unknown>
#5 0x5561bccebf96 <unknown>
#6 0x5561bccddc23 <unknown>
#7 0x5561bccaa4a5 <unknown>
#8 0x5561bccab111 <unknown>
#9 0x5561bd185f1b <unknown>
#10 0x5561bd189e19 <unknown>
#11 0x5561bd16cac9 <unknown>
#12 0x5561bd18a9c8 <unknown>
#13 0x5561bd15134f <unknown>
#14 0x5561bd1aea28 <unknown>
#15 0x5561bd1aec06 <unknown>
#16 0x5561bd1c0336 <unknown>
#17 0x7fc09ce9caa4 <unknown>
#18 0x7fc09cf29c3c <unknown>
ERROR tests/test_login.py::test_invalid_password_login[shubhamdabir07@gmail.com-Password] - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x55a93847f45a <unknown>
#1 0x55a937f24760 <unknown>
#2 0x55a937f5f0d8 <unknown>
#3 0x55a937f5a2cf <unknown>
#4 0x55a937faa8d6 <unknown>
#5 0x55a937fa9f96 <unknown>
#6 0x55a937f9bc23 <unknown>
#7 0x55a937f684a5 <unknown>
#8 0x55a937f69111 <unknown>
#9 0x55a938443f1b <unknown>
#10 0x55a938447e19 <unknown>
#11 0x55a93842aac9 <unknown>
#12 0x55a9384489c8 <unknown>
#13 0x55a93840f34f <unknown>
#14 0x55a93846ca28 <unknown>
#15 0x55a93846cc06 <unknown>
#16 0x55a93847e336 <unknown>
#17 0x7f6da849caa4 <unknown>
#18 0x7f6da8529c3c <unknown>
ERROR tests/test_login.py::test_invalid_password_login[hrishikesh.shinde1607@gmail.com-payer@1234] - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x55722759845a <unknown>
#1 0x55722703d760 <unknown>
#2 0x5572270780d8 <unknown>
#3 0x5572270732cf <unknown>
#4 0x5572270c38d6 <unknown>
#5 0x5572270c2f96 <unknown>
#6 0x5572270b4c23 <unknown>
#7 0x5572270814a5 <unknown>
#8 0x557227082111 <unknown>
#9 0x55722755cf1b <unknown>
#10 0x557227560e19 <unknown>
#11 0x557227543ac9 <unknown>
#12 0x5572275619c8 <unknown>
#13 0x55722752834f <unknown>
#14 0x557227585a28 <unknown>
#15 0x557227585c06 <unknown>
#16 0x557227597336 <unknown>
#17 0x7f7cb509caa4 <unknown>
#18 0x7f7cb5129c3c <unknown>
ERROR tests/test_login.py::test_blank_username_validation - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x5637e03b145a <unknown>
#1 0x5637dfe56760 <unknown>
#2 0x5637dfe910d8 <unknown>
#3 0x5637dfe8c2cf <unknown>
#4 0x5637dfedc8d6 <unknown>
#5 0x5637dfedbf96 <unknown>
#6 0x5637dfecdc23 <unknown>
#7 0x5637dfe9a4a5 <unknown>
#8 0x5637dfe9b111 <unknown>
#9 0x5637e0375f1b <unknown>
#10 0x5637e0379e19 <unknown>
#11 0x5637e035cac9 <unknown>
#12 0x5637e037a9c8 <unknown>
#13 0x5637e034134f <unknown>
#14 0x5637e039ea28 <unknown>
#15 0x5637e039ec06 <unknown>
#16 0x5637e03b0336 <unknown>
#17 0x7fc2ef89caa4 <unknown>
#18 0x7fc2ef929c3c <unknown>
ERROR tests/test_login.py::test_blank_password_validation - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x55a79eb3f45a <unknown>
#1 0x55a79e5e4760 <unknown>
#2 0x55a79e61f0d8 <unknown>
#3 0x55a79e61a2cf <unknown>
#4 0x55a79e66a8d6 <unknown>
#5 0x55a79e669f96 <unknown>
#6 0x55a79e65bc23 <unknown>
#7 0x55a79e6284a5 <unknown>
#8 0x55a79e629111 <unknown>
#9 0x55a79eb03f1b <unknown>
#10 0x55a79eb07e19 <unknown>
#11 0x55a79eaeaac9 <unknown>
#12 0x55a79eb089c8 <unknown>
#13 0x55a79eacf34f <unknown>
#14 0x55a79eb2ca28 <unknown>
#15 0x55a79eb2cc06 <unknown>
#16 0x55a79eb3e336 <unknown>
#17 0x7f7a57c9caa4 <unknown>
#18 0x7f7a57d29c3c <unknown>
ERROR tests/test_login.py::test_invalid_email_validation[username0] - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x558d03d7145a <unknown>
#1 0x558d03816760 <unknown>
#2 0x558d038510d8 <unknown>
#3 0x558d0384c2cf <unknown>
#4 0x558d0389c8d6 <unknown>
#5 0x558d0389bf96 <unknown>
#6 0x558d0388dc23 <unknown>
#7 0x558d0385a4a5 <unknown>
#8 0x558d0385b111 <unknown>
#9 0x558d03d35f1b <unknown>
#10 0x558d03d39e19 <unknown>
#11 0x558d03d1cac9 <unknown>
#12 0x558d03d3a9c8 <unknown>
#13 0x558d03d0134f <unknown>
#14 0x558d03d5ea28 <unknown>
#15 0x558d03d5ec06 <unknown>
#16 0x558d03d70336 <unknown>
#17 0x7f95c509caa4 <unknown>
#18 0x7f95c5129c3c <unknown>
ERROR tests/test_login.py::test_invalid_email_validation[username1] - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x564fd911345a <unknown>
#1 0x564fd8bb8760 <unknown>
#2 0x564fd8bf30d8 <unknown>
#3 0x564fd8bee2cf <unknown>
#4 0x564fd8c3e8d6 <unknown>
#5 0x564fd8c3df96 <unknown>
#6 0x564fd8c2fc23 <unknown>
#7 0x564fd8bfc4a5 <unknown>
#8 0x564fd8bfd111 <unknown>
#9 0x564fd90d7f1b <unknown>
#10 0x564fd90dbe19 <unknown>
#11 0x564fd90beac9 <unknown>
#12 0x564fd90dc9c8 <unknown>
#13 0x564fd90a334f <unknown>
#14 0x564fd9100a28 <unknown>
#15 0x564fd9100c06 <unknown>
#16 0x564fd9112336 <unknown>
#17 0x7fc5ea69caa4 <unknown>
#18 0x7fc5ea729c3c <unknown>
ERROR tests/test_login.py::test_invalid_email_validation[username2] - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x562b25aaf45a <unknown>
#1 0x562b25554760 <unknown>
#2 0x562b2558f0d8 <unknown>
#3 0x562b2558a2cf <unknown>
#4 0x562b255da8d6 <unknown>
#5 0x562b255d9f96 <unknown>
#6 0x562b255cbc23 <unknown>
#7 0x562b255984a5 <unknown>
#8 0x562b25599111 <unknown>
#9 0x562b25a73f1b <unknown>
#10 0x562b25a77e19 <unknown>
#11 0x562b25a5aac9 <unknown>
#12 0x562b25a789c8 <unknown>
#13 0x562b25a3f34f <unknown>
#14 0x562b25a9ca28 <unknown>
#15 0x562b25a9cc06 <unknown>
#16 0x562b25aae336 <unknown>
#17 0x7f39a2e9caa4 <unknown>
#18 0x7f39a2f29c3c <unknown>
ERROR tests/test_login.py::test_invalid_email_validation[username3] - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x5655085f245a <unknown>
#1 0x565508097760 <unknown>
#2 0x5655080d20d8 <unknown>
#3 0x5655080cd2cf <unknown>
#4 0x56550811d8d6 <unknown>
#5 0x56550811cf96 <unknown>
#6 0x56550810ec23 <unknown>
#7 0x5655080db4a5 <unknown>
#8 0x5655080dc111 <unknown>
#9 0x5655085b6f1b <unknown>
#10 0x5655085bae19 <unknown>
#11 0x56550859dac9 <unknown>
#12 0x5655085bb9c8 <unknown>
#13 0x56550858234f <unknown>
#14 0x5655085dfa28 <unknown>
#15 0x5655085dfc06 <unknown>
#16 0x5655085f1336 <unknown>
#17 0x7fb99aa9caa4 <unknown>
#18 0x7fb99ab29c3c <unknown>
ERROR tests/test_login.py::test_invalid_email_validation[username4] - Failed: Driver setup failed: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir
Stacktrace:
#0 0x5617981b945a <unknown>
#1 0x561797c5e760 <unknown>
#2 0x561797c990d8 <unknown>
#3 0x561797c942cf <unknown>
#4 0x561797ce48d6 <unknown>
#5 0x561797ce3f96 <unknown>
#6 0x561797cd5c23 <unknown>
#7 0x561797ca24a5 <unknown>
#8 0x561797ca3111 <unknown>
#9 0x56179817df1b <unknown>
#10 0x561798181e19 <unknown>
#11 0x561798164ac9 <unknown>
#12 0x5617981829c8 <unknown>
#13 0x56179814934f <unknown>
#14 0x5617981a6a28 <unknown>
#15 0x5617981a6c06 <unknown>
#16 0x5617981b8336 <unknown>
#17 0x7fe00de9caa4 <unknown>
#18 0x7fe00df29c3c <unknown>
============================= 19 errors in 27.30s ==============================
--------------------------------------------
Test Run Finished: 2025-07-02 14:55:25
Duration: 29 seconds
Status: FAILURE
Exit Code: 1
============================================
